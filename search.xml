<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>C++-example</title>
      <link href="/posts/9071.html"/>
      <url>/posts/9071.html</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>C++-study</title>
      <link href="/posts/241f.html"/>
      <url>/posts/241f.html</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Anaconda3安装教程(详细)</title>
      <link href="/posts/bf8d.html"/>
      <url>/posts/bf8d.html</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="Anaconda3下载"><a href="#Anaconda3下载" class="headerlink" title="Anaconda3下载"></a>Anaconda3下载</h2><p>下载地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a><br>选择anaconda 3.5.2 对应的python版本是python3.6<br><img src="https://img-blog.csdnimg.cn/20200319185750950.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "></p><h2 id="安装anaconda3"><a href="#安装anaconda3" class="headerlink" title="安装anaconda3"></a>安装anaconda3</h2><p><img src="https://img-blog.csdnimg.cn/20200319185859583.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>点击next</p><p><img src="https://img-blog.csdnimg.cn/2020031918593948.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>点击I Agree</p><p><img src="https://img-blog.csdnimg.cn/20200319190001173.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>然后选择Install for All Users，点击Next<br><img src="https://img-blog.csdnimg.cn/2020031919012346.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>选择安装位置，建议不要安装在C盘。<br><img src="https://img-blog.csdnimg.cn/20200319200626716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>默认第一项是没有选择的，这里我把它勾上，添加anaconda到系统环境变量中，然后点击Install<br><img src="https://img-blog.csdnimg.cn/20200319200952980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>等待安装完成。<br><img src="https://img-blog.csdnimg.cn/20200319202441221.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>接下来有安装VScode的选项，这里选择跳过，点击Skip<br><img src="https://img-blog.csdnimg.cn/20200319202521557.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>安装完成，点击Finished</p><h3 id="验证anaconda是否安装成功"><a href="#验证anaconda是否安装成功" class="headerlink" title="验证anaconda是否安装成功"></a>验证anaconda是否安装成功</h3><p>打开cmd命令行，输入conda -V，如果能看到conda版本号，说明anaconda已经安装好了。<br><img src="https://img-blog.csdnimg.cn/20200319202840535.png" alt=" "></p><h2 id="用conda创建python虚拟环境"><a href="#用conda创建python虚拟环境" class="headerlink" title="用conda创建python虚拟环境"></a>用conda创建python虚拟环境</h2><p>  　　使用conda create -n your_env_name python=X.X（2.7、3.6等)命令创建python版本为X.X、名字为your_env_name的虚拟环境。your_env_name文件可以在Anaconda安装目录envs文件下找到。</p><p><code>conda create -n learn python=3.6</code><br>我选择建立一个名为learn的python版本为3.6的虚拟环境</p><h3 id="activate激活虚拟环境"><a href="#activate激活虚拟环境" class="headerlink" title="activate激活虚拟环境"></a>activate激活虚拟环境</h3><p><img src="https://img-blog.csdnimg.cn/20200320102010525.png" alt=" "><br>在这里输入activate tensorflow<br>显示激活成功。<br>输入deactivate回到默认环境中</p><hr><p>如果想要删除创建的虚拟环境：<br>使用conda remove -n your_env_name(虚拟环境名称) –all命令<br>在虚拟环境中安装额外的包：<br>使用命令conda install -n your_env_name [package]即可安装package到your_env_name中<br>用pip安装tensorflow换成国内源快速安装：<br><code>pip install --index-url https://pypi.douban.com/simple tensorflow</code></p><h3 id="安装tensorflow和keras"><a href="#安装tensorflow和keras" class="headerlink" title="安装tensorflow和keras"></a>安装tensorflow和keras</h3><p>使用命令<code>conda install -n your_env_name tensorflow</code>安装，如果想要指定tensorflow的版本号，直接tensorflow==X.X.X</p><p><strong>想要在jupyter notebook中import tensorflow</strong><br>需要执行以下命令：<br><code>conda install ipython</code><br><code>conda install jupyter</code><br>最后输入<code>conda install keras</code>安装keras<br><img src="https://img-blog.csdnimg.cn/20200320102608665.png" alt=" "><br>检查以下tensorflow和keras是否安装成功<br><img src="https://img-blog.csdnimg.cn/20200320102827481.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br><img src="https://img-blog.csdnimg.cn/20200320102847141.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=" "><br>cmd命令行输入jupyter notebook，import tensorflow看是否报错<br><img src="https://img-blog.csdnimg.cn/2020032010311961.png" alt=" "><br>没有输出任何信息，证明已经安装好了。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> anaconda python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>机器学习-李宏毅| 回归演示 | python</title>
      <link href="/posts/c315.html"/>
      <url>/posts/c315.html</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="回归的定义"><a href="#回归的定义" class="headerlink" title="回归的定义"></a>回归的定义</h2><p>Regression就是指找到一个函数$function$，通过输入特征x，输出一个数值$Scalar$</p><p>看了李宏毅老师的机器学习课程视频，其中的Regression demo部分，关于预测宝可梦的CP值的应用代码，在jupyter notebook中实现。<br>现在假设有10个x_data和y_data，x和y之间的关系是y_data=b+w*x_data。b，w都是参数，是需要学习出来的。现在我们来练习用梯度下降找到b和w。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns<span class="token operator">%</span>matplotlib inlineplt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Simhei'</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true"># 显示中文</span>mpl<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment" spellcheck="true"># 解决保存图像是负号'-'显示为方块的问题</span>x_data<span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">338</span><span class="token punctuation">.</span><span class="token punctuation">,</span>  <span class="token number">333</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">328</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">207</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">226</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">208</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">606</span><span class="token punctuation">.</span><span class="token punctuation">]</span>y_data<span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">640</span><span class="token punctuation">.</span><span class="token punctuation">,</span>  <span class="token number">633</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">619</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">393</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">428</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">193</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">226</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1591</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># ydata =b + w * xdata</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#bias</span>y <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#weight</span>Z <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> len<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>X<span class="token punctuation">,</span> Y <span class="token operator">=</span> np<span class="token punctuation">.</span>meshgrid<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        w <span class="token operator">=</span> y<span class="token punctuation">[</span>j<span class="token punctuation">]</span>        Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> n <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>x_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token operator">+</span> <span class="token punctuation">(</span>y_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">-</span> b <span class="token operator">-</span> w<span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">**</span><span class="token number">2</span>        Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span>   Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span>len<span class="token punctuation">(</span>x_data<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ydata = b + w * xdata</span>b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">120</span> <span class="token comment" spellcheck="true"># initial b</span>w <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">4</span> <span class="token comment" spellcheck="true">#intial w</span>lr <span class="token operator">=</span><span class="token number">0.0000001</span> iteration <span class="token operator">=</span> <span class="token number">100000</span> <span class="token comment" spellcheck="true"># Store initial values for plotting.</span>b_history <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">]</span>w_history <span class="token operator">=</span> <span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token comment" spellcheck="true">#lr_b = 0 #客制化b的learning rate 的初始值</span><span class="token comment" spellcheck="true">#lr_w = 0 #客制化w的learning rate 的初始值</span><span class="token comment" spellcheck="true"># Iterations</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>iteration<span class="token punctuation">)</span><span class="token punctuation">:</span>    b_grad <span class="token operator">=</span> <span class="token number">0.0</span>    w_grad <span class="token operator">=</span> <span class="token number">0.0</span>    <span class="token keyword">for</span> n <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>x_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b_grad <span class="token operator">=</span> b_grad <span class="token operator">-</span> <span class="token number">2.0</span><span class="token operator">*</span><span class="token punctuation">(</span>y_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">-</span> b <span class="token operator">-</span> w<span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token number">1.0</span>        w_grad <span class="token operator">=</span> w_grad <span class="token operator">-</span> <span class="token number">2.0</span><span class="token operator">*</span><span class="token punctuation">(</span>y_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">-</span> b <span class="token operator">-</span> w<span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># lr_b = lr_b + b_grad ** 2 #客制化b的learning rate</span>   <span class="token comment" spellcheck="true"># lr_w = lr_w + w_grad ** 2 #客制化w的learning rate</span>    <span class="token comment" spellcheck="true"># Update parameters.</span>    b <span class="token operator">=</span> b <span class="token operator">-</span> lr <span class="token operator">*</span> b_grad    w <span class="token operator">=</span> w <span class="token operator">-</span> lr <span class="token operator">*</span> w_grad    <span class="token comment" spellcheck="true"># Store parameters for plotting</span>    b_history<span class="token punctuation">.</span>append<span class="token punctuation">(</span>b<span class="token punctuation">)</span>    w_history<span class="token punctuation">.</span>append<span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># plot the figure</span>plt<span class="token punctuation">.</span>contourf<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> Z<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">'jet'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">188.4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2.67</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> ms <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">,</span> markeredgewidth <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'orange'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>b_history<span class="token punctuation">,</span> w_history<span class="token punctuation">,</span> <span class="token string">'o-'</span><span class="token punctuation">,</span> ms<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span>r<span class="token string">'$b$'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span>r<span class="token string">'$w$'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"线性回归"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>输出结果图：<br><img src="https://img-blog.csdnimg.cn/20200312150150723.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>横坐标是b，纵坐标是w，标记×位最优解，显然，在图中我们并没有运行得到最优解，最优解十分的遥远。那么我们就调大learning rate，lr = 0.000001（调大10倍），得到结果如下图。<br><img src="https://img-blog.csdnimg.cn/20200312150917344.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>我们再调大learning rate，lr = 0.00001（调大10倍），得到结果如下图。<br><img src="https://img-blog.csdnimg.cn/20200312153648587.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>结果发现learning rate太大了，结果很不好。<br>所以我们给b和w特制化两种learning rate<br>修改后代码如下：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns<span class="token operator">%</span>matplotlib inlineplt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Simhei'</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true"># 显示中文</span>mpl<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment" spellcheck="true"># 解决保存图像是负号'-'显示为方块的问题</span>x_data<span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">338</span><span class="token punctuation">.</span><span class="token punctuation">,</span>  <span class="token number">333</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">328</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">207</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">226</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">208</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">606</span><span class="token punctuation">.</span><span class="token punctuation">]</span>y_data<span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">640</span><span class="token punctuation">.</span><span class="token punctuation">,</span>  <span class="token number">633</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">619</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">393</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">428</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">193</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">226</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1591</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># ydata =b + w * xdata</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#bias</span>y <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#weight</span>Z <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> len<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>X<span class="token punctuation">,</span> Y <span class="token operator">=</span> np<span class="token punctuation">.</span>meshgrid<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        w <span class="token operator">=</span> y<span class="token punctuation">[</span>j<span class="token punctuation">]</span>        Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> n <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>x_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token operator">+</span> <span class="token punctuation">(</span>y_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">-</span> b <span class="token operator">-</span> w<span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">**</span><span class="token number">2</span>        Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span>   Z<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span>len<span class="token punctuation">(</span>x_data<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ydata = b + w * xdata</span>b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">120</span> <span class="token comment" spellcheck="true"># initial b</span>w <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">4</span> <span class="token comment" spellcheck="true">#intial w</span>lr <span class="token operator">=</span><span class="token number">1</span> <span class="token comment" spellcheck="true">#learning rate设为1</span>iteration <span class="token operator">=</span> <span class="token number">100000</span> <span class="token comment" spellcheck="true"># Store initial values for plotting.</span>b_history <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">]</span>w_history <span class="token operator">=</span> <span class="token punctuation">[</span>w<span class="token punctuation">]</span>lr_b <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment" spellcheck="true">#客制化b的learning rate 的初始值</span>lr_w <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment" spellcheck="true">#客制化w的learning rate 的初始值</span><span class="token comment" spellcheck="true"># Iterations</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>iteration<span class="token punctuation">)</span><span class="token punctuation">:</span>    b_grad <span class="token operator">=</span> <span class="token number">0.0</span>    w_grad <span class="token operator">=</span> <span class="token number">0.0</span>    <span class="token keyword">for</span> n <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>x_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b_grad <span class="token operator">=</span> b_grad <span class="token operator">-</span> <span class="token number">2.0</span><span class="token operator">*</span><span class="token punctuation">(</span>y_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">-</span> b <span class="token operator">-</span> w<span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token number">1.0</span>        w_grad <span class="token operator">=</span> w_grad <span class="token operator">-</span> <span class="token number">2.0</span><span class="token operator">*</span><span class="token punctuation">(</span>y_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">-</span> b <span class="token operator">-</span> w<span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span>x_data<span class="token punctuation">[</span>n<span class="token punctuation">]</span>    lr_b <span class="token operator">=</span> lr_b <span class="token operator">+</span> b_grad <span class="token operator">**</span> <span class="token number">2</span> <span class="token comment" spellcheck="true">#客制化b的learning rate</span>    lr_w <span class="token operator">=</span> lr_w <span class="token operator">+</span> w_grad <span class="token operator">**</span> <span class="token number">2</span> <span class="token comment" spellcheck="true">#客制化w的learning rate</span>    <span class="token comment" spellcheck="true"># Update parameters.</span>    b <span class="token operator">=</span> b <span class="token operator">-</span> lr<span class="token operator">/</span>np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>lr_b <span class="token punctuation">)</span> <span class="token operator">*</span> b_grad    w <span class="token operator">=</span> w <span class="token operator">-</span> lr<span class="token operator">/</span>np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>lr_w <span class="token punctuation">)</span> <span class="token operator">*</span> w_grad    <span class="token comment" spellcheck="true"># Store parameters for plotting</span>    b_history<span class="token punctuation">.</span>append<span class="token punctuation">(</span>b<span class="token punctuation">)</span>    w_history<span class="token punctuation">.</span>append<span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># plot the figure</span>plt<span class="token punctuation">.</span>contourf<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> Z<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">'jet'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">188.4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2.67</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> ms <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">,</span> markeredgewidth <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'orange'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>b_history<span class="token punctuation">,</span> w_history<span class="token punctuation">,</span> <span class="token string">'o-'</span><span class="token punctuation">,</span> ms<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span>r<span class="token string">'$b$'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span>r<span class="token string">'$w$'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"线性回归"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>这样有了新的特制化两种learning rate就可以在10w次迭代之内到达最优点了。<br><img src="https://img-blog.csdnimg.cn/20200312154047356.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> logistic regression python 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSDN-markdown编辑器语法——字体、字号与颜色设置</title>
      <link href="/posts/36fc.html"/>
      <url>/posts/36fc.html</url>
      
        <content type="html"><![CDATA[<a id="more"></a> <p>  <strong>Markdown</strong>是一种可以使用普通文本编辑器编写的标记语言，通过类似HTML的标记语法，它可以使普通文本内容具有一定的格式。但是它本身是不支持修改字体、字号与颜色等功能的！</p><p>  <strong>CSDN-markdown</strong>编辑器是其衍生版本，扩展了Markdown的功能（如表格、脚注、<strong>内嵌HTML</strong>等等）！对，就是<strong>内嵌HTML</strong>，接下来要讲的功能就需要使用<strong>内嵌HTML</strong>的方法来实现。</p><h1 id="字体字号与颜色"><a name="t0"></a><a name="t0"></a>字体、字号与颜色</h1><pre><code>&lt;font face="黑体"&gt;我是黑体字&lt;/font&gt;&lt;font face="微软雅黑"&gt;我是微软雅黑&lt;/font&gt;&lt;font face="STCAIYUN"&gt;我是华文彩云&lt;/font&gt;&lt;font color=#0099ff size=7 face="黑体"&gt;color=#0099ff size=72 face="黑体"&lt;/font&gt;&lt;font color=#00ffff size=72&gt;color=#00ffff&lt;/font&gt;&lt;font color=gray size=72&gt;color=gray&lt;/font&gt;</code></pre><p>Size：规定文本的尺寸大小。可能的值：从 1 到 7 的数字。浏览器默认值是 3。</p><h1 id="呈现效果"><a name="t1"></a><a name="t1"></a>呈现效果</h1><hr><p><font face="黑体">我是黑体字</font> <br><font face="微软雅黑">我是微软雅黑</font> <br><font face="STCAIYUN">我是华文彩云</font> <br><font color="#0099ff" size="7" face="黑体">color=#0099ff size=72 face=”黑体”</font> <br><font color="#00ffff" size="72">color=#00ffff 可以用十六位颜色值</font> <br><font color="gray" size="72">color=gray 也可以用已知颜色名</font></p><h1 id="颜色名列表"><a name="t2"></a><a name="t2"></a>颜色名列表</h1><hr><div class="table-box"><table><tbody><tr><th>颜色名</th><th>十六进制颜色值</th><th>颜色</th></tr><tr><td><font color="AliceBlue">AliceBlue</font></td><td><font color="#F0F8FF">#F0F8FF</font></td><td bgcolor="#F0F8FF">rgb(240, 248, 255)</td></tr><tr><td><font color="AntiqueWhite">AntiqueWhite</font></td><td><font color="#FAEBD7">#FAEBD7</font></td><td bgcolor="#FAEBD7">rgb(250, 235, 215)</td></tr><tr><td><font color="Aqua">Aqua</font></td><td><font color="#00FFFF">#00FFFF</font></td><td bgcolor="#00FFFF">rgb(0, 255, 255)</td></tr><tr><td><font color="Aquamarine">Aquamarine</font></td><td><font color="#7FFFD4">#7FFFD4</font></td><td bgcolor="#7FFFD4">rgb(127, 255, 212)</td></tr><tr><td><font color="Azure">Azure</font></td><td><font color="#F0FFFF">#F0FFFF</font></td><td bgcolor="#F0FFFF">rgb(240, 255, 255)</td></tr><tr><td><font color="Beige">Beige</font></td><td><font color="#F5F5DC">#F5F5DC</font></td><td bgcolor="#F5F5DC">rgb(245, 245, 220)</td></tr><tr><td><font color="Bisque">Bisque</font></td><td><font color="#FFE4C4">#FFE4C4</font></td><td bgcolor="#FFE4C4">rgb(255, 228, 196)</td></tr><tr><td><font color="Black">Black</font></td><td><font color="#000000">#000000</font></td><td bgcolor="#000000">rgb(0, 0, 0)</td></tr><tr><td><font color="BlanchedAlmond">BlanchedAlmond</font></td><td><font color="#FFEBCD">#FFEBCD</font></td><td bgcolor="#FFEBCD">rgb(255, 235, 205)</td></tr><tr><td><font color="Blue">Blue</font></td><td><font color="#0000FF">#0000FF</font></td><td bgcolor="#0000FF">rgb(0, 0, 255)</td></tr><tr><td><font color="BlueViolet">BlueViolet</font></td><td><font color="#8A2BE2">#8A2BE2</font></td><td bgcolor="#8A2BE2">rgb(138, 43, 226)</td></tr><tr><td><font color="Brown">Brown</font></td><td><font color="#A52A2A">#A52A2A</font></td><td bgcolor="#A52A2A">rgb(165, 42, 42)</td></tr><tr><td><font color="BurlyWood">BurlyWood</font></td><td><font color="#DEB887">#DEB887</font></td><td bgcolor="#DEB887">rgb(222, 184, 135)</td></tr><tr><td><font color="CadetBlue">CadetBlue</font></td><td><font color="#5F9EA0">#5F9EA0</font></td><td bgcolor="#5F9EA0">rgb(95, 158, 160)</td></tr><tr><td><font color="Chartreuse">Chartreuse</font></td><td><font color="#7FFF00">#7FFF00</font></td><td bgcolor="#7FFF00">rgb(127, 255, 0)</td></tr><tr><td><font color="Chocolate">Chocolate</font></td><td><font color="#D2691E">#D2691E</font></td><td bgcolor="#D2691E">rgb(210, 105, 30)</td></tr><tr><td><font color="Coral">Coral</font></td><td><font color="#FF7F50">#FF7F50</font></td><td bgcolor="#FF7F50">rgb(255, 127, 80)</td></tr><tr><td><font color="CornflowerBlue">CornflowerBlue</font></td><td><font color="#6495ED">#6495ED</font></td><td bgcolor="#6495ED">rgb(100, 149, 237)</td></tr><tr><td><font color="Cornsilk">Cornsilk</font></td><td><font color="#FFF8DC">#FFF8DC</font></td><td bgcolor="#FFF8DC">rgb(255, 248, 220)</td></tr><tr><td><font color="Crimson">Crimson</font></td><td><font color="#DC143C">#DC143C</font></td><td bgcolor="#DC143C">rgb(220, 20, 60)</td></tr><tr><td><font color="Cyan">Cyan</font></td><td><font color="#00FFFF">#00FFFF</font></td><td bgcolor="#00FFFF">rgb(0, 255, 255)</td></tr><tr><td><font color="DarkBlue">DarkBlue</font></td><td><font color="#00008B">#00008B</font></td><td bgcolor="#00008B">rgb(0, 0, 139)</td></tr><tr><td><font color="DarkCyan">DarkCyan</font></td><td><font color="#008B8B">#008B8B</font></td><td bgcolor="#008B8B">rgb(0, 139, 139)</td></tr><tr><td><font color="DarkGoldenRod">DarkGoldenRod</font></td><td><font color="#B8860B">#B8860B</font></td><td bgcolor="#B8860B">rgb(184, 134, 11)</td></tr><tr><td><font color="DarkGray">DarkGray</font></td><td><font color="#A9A9A9">#A9A9A9</font></td><td bgcolor="#A9A9A9">rgb(169, 169, 169)</td></tr><tr><td><font color="DarkGreen">DarkGreen</font></td><td><font color="#006400">#006400</font></td><td bgcolor="#006400">rgb(0, 100, 0)</td></tr><tr><td><font color="DarkKhaki">DarkKhaki</font></td><td><font color="#BDB76B">#BDB76B</font></td><td bgcolor="#BDB76B">rgb(189, 183, 107)</td></tr><tr><td><font color="DarkMagenta">DarkMagenta</font></td><td><font color="#8B008B">#8B008B</font></td><td bgcolor="#8B008B">rgb(139, 0, 139)</td></tr><tr><td><font color="DarkOliveGreen">DarkOliveGreen</font></td><td><font color="#556B2F">#556B2F</font></td><td bgcolor="#556B2F">rgb(85, 107, 47)</td></tr><tr><td><font color="Darkorange">Darkorange</font></td><td><font color="#FF8C00">#FF8C00</font></td><td bgcolor="#FF8C00">rgb(255, 140, 0)</td></tr><tr><td><font color="DarkOrchid">DarkOrchid</font></td><td><font color="#9932CC">#9932CC</font></td><td bgcolor="#9932CC">rgb(153, 50, 204)</td></tr><tr><td><font color="DarkRed">DarkRed</font></td><td><font color="#8B0000">#8B0000</font></td><td bgcolor="#8B0000">rgb(139, 0, 0)</td></tr><tr><td><font color="DarkSalmon">DarkSalmon</font></td><td><font color="#E9967A">#E9967A</font></td><td bgcolor="#E9967A">rgb(233, 150, 122)</td></tr><tr><td><font color="DarkSeaGreen">DarkSeaGreen</font></td><td><font color="#8FBC8F">#8FBC8F</font></td><td bgcolor="#8FBC8F">rgb(143, 188, 143)</td></tr><tr><td><font color="DarkSlateBlue">DarkSlateBlue</font></td><td><font color="#483D8B">#483D8B</font></td><td bgcolor="#483D8B">rgb(72, 61, 139)</td></tr><tr><td><font color="DarkSlateGray">DarkSlateGray</font></td><td><font color="#2F4F4F">#2F4F4F</font></td><td bgcolor="#2F4F4F">rgb(47, 79, 79)</td></tr><tr><td><font color="DarkTurquoise">DarkTurquoise</font></td><td><font color="#00CED1">#00CED1</font></td><td bgcolor="#00CED1">rgb(0, 206, 209)</td></tr><tr><td><font color="DarkViolet">DarkViolet</font></td><td><font color="#9400D3">#9400D3</font></td><td bgcolor="#9400D3">rgb(148, 0, 211)</td></tr><tr><td><font color="DeepPink">DeepPink</font></td><td><font color="#FF1493">#FF1493</font></td><td bgcolor="#FF1493">rgb(255, 20, 147)</td></tr><tr><td><font color="DeepSkyBlue">DeepSkyBlue</font></td><td><font color="#00BFFF">#00BFFF</font></td><td bgcolor="#00BFFF">rgb(0, 191, 255)</td></tr><tr><td><font color="DimGray">DimGray</font></td><td><font color="#696969">#696969</font></td><td bgcolor="#696969">rgb(105, 105, 105)</td></tr><tr><td><font color="DodgerBlue">DodgerBlue</font></td><td><font color="#1E90FF">#1E90FF</font></td><td bgcolor="#1E90FF">rgb(30, 144, 255)</td></tr><tr><td><font color="Feldspar">Feldspar</font></td><td><font color="#D19275">#D19275</font></td><td bgcolor="#D19275">rgb(209, 146, 117)</td></tr><tr><td><font color="FireBrick">FireBrick</font></td><td><font color="#B22222">#B22222</font></td><td bgcolor="#B22222">rgb(178, 34, 34)</td></tr><tr><td><font color="FloralWhite">FloralWhite</font></td><td><font color="#FFFAF0">#FFFAF0</font></td><td bgcolor="#FFFAF0">rgb(255, 250, 240)</td></tr><tr><td><font color="ForestGreen">ForestGreen</font></td><td><font color="#228B22">#228B22</font></td><td bgcolor="#228B22">rgb(34, 139, 34)</td></tr><tr><td><font color="Fuchsia">Fuchsia</font></td><td><font color="#FF00FF">#FF00FF</font></td><td bgcolor="#FF00FF">rgb(255, 0, 255)</td></tr><tr><td><font color="Gainsboro">Gainsboro</font></td><td><font color="#DCDCDC">#DCDCDC</font></td><td bgcolor="#DCDCDC">rgb(220, 220, 220)</td></tr><tr><td><font color="GhostWhite">GhostWhite</font></td><td><font color="#F8F8FF">#F8F8FF</font></td><td bgcolor="#F8F8FF">rgb(248, 248, 255)</td></tr><tr><td><font color="Gold">Gold</font></td><td><font color="#FFD700">#FFD700</font></td><td bgcolor="#FFD700">rgb(255, 215, 0)</td></tr><tr><td><font color="GoldenRod">GoldenRod</font></td><td><font color="#DAA520">#DAA520</font></td><td bgcolor="#DAA520">rgb(218, 165, 32)</td></tr><tr><td><font color="Gray">Gray</font></td><td><font color="#808080">#808080</font></td><td bgcolor="#808080">rgb(128, 128, 128)</td></tr><tr><td><font color="Green">Green</font></td><td><font color="#008000">#008000</font></td><td bgcolor="#008000">rgb(0, 128, 0)</td></tr><tr><td><font color="GreenYellow">GreenYellow</font></td><td><font color="#ADFF2F">#ADFF2F</font></td><td bgcolor="#ADFF2F">rgb(173, 255, 47)</td></tr><tr><td><font color="HoneyDew">HoneyDew</font></td><td><font color="#F0FFF0">#F0FFF0</font></td><td bgcolor="#F0FFF0">rgb(240, 255, 240)</td></tr><tr><td><font color="HotPink">HotPink</font></td><td><font color="#FF69B4">#FF69B4</font></td><td bgcolor="#FF69B4">rgb(255, 105, 180)</td></tr><tr><td><font color="IndianRed">IndianRed</font></td><td><font color="#CD5C5C">#CD5C5C</font></td><td bgcolor="#CD5C5C">rgb(205, 92, 92)</td></tr><tr><td><font color="Indigo">Indigo</font></td><td><font color="#4B0082">#4B0082</font></td><td bgcolor="#4B0082">rgb(75, 0, 130)</td></tr><tr><td><font color="Ivory">Ivory</font></td><td><font color="#FFFFF0">#FFFFF0</font></td><td bgcolor="#FFFFF0">rgb(255, 255, 240)</td></tr><tr><td><font color="Khaki">Khaki</font></td><td><font color="#F0E68C">#F0E68C</font></td><td bgcolor="#F0E68C">rgb(240, 230, 140)</td></tr><tr><td><font color="Lavender">Lavender</font></td><td><font color="#E6E6FA">#E6E6FA</font></td><td bgcolor="#E6E6FA">rgb(230, 230, 250)</td></tr><tr><td><font color="LavenderBlush">LavenderBlush</font></td><td><font color="#FFF0F5">#FFF0F5</font></td><td bgcolor="#FFF0F5">rgb(255, 240, 245)</td></tr><tr><td><font color="LawnGreen">LawnGreen</font></td><td><font color="#7CFC00">#7CFC00</font></td><td bgcolor="#7CFC00">rgb(124, 252, 0)</td></tr><tr><td><font color="LemonChiffon">LemonChiffon</font></td><td><font color="#FFFACD">#FFFACD</font></td><td bgcolor="#FFFACD">rgb(255, 250, 205)</td></tr><tr><td><font color="LightBlue">LightBlue</font></td><td><font color="#ADD8E6">#ADD8E6</font></td><td bgcolor="#ADD8E6">rgb(173, 216, 230)</td></tr><tr><td><font color="LightCoral">LightCoral</font></td><td><font color="#F08080">#F08080</font></td><td bgcolor="#F08080">rgb(240, 128, 128)</td></tr><tr><td><font color="LightCyan">LightCyan</font></td><td><font color="#E0FFFF">#E0FFFF</font></td><td bgcolor="#E0FFFF">rgb(224, 255, 255)</td></tr><tr><td><font color="LightGoldenRodYellow">LightGoldenRodYellow</font></td><td><font color="#FAFAD2">#FAFAD2</font></td><td bgcolor="#FAFAD2">rgb(250, 250, 210)</td></tr><tr><td><font color="LightGrey">LightGrey</font></td><td><font color="#D3D3D3">#D3D3D3</font></td><td bgcolor="#D3D3D3">rgb(211, 211, 211)</td></tr><tr><td><font color="LightGreen">LightGreen</font></td><td><font color="#90EE90">#90EE90</font></td><td bgcolor="#90EE90">rgb(144, 238, 144)</td></tr><tr><td><font color="LightPink">LightPink</font></td><td><font color="#FFB6C1">#FFB6C1</font></td><td bgcolor="#FFB6C1">rgb(255, 182, 193)</td></tr><tr><td><font color="LightSalmon">LightSalmon</font></td><td><font color="#FFA07A">#FFA07A</font></td><td bgcolor="#FFA07A">rgb(255, 160, 122)</td></tr><tr><td><font color="LightSeaGreen">LightSeaGreen</font></td><td><font color="#20B2AA">#20B2AA</font></td><td bgcolor="#20B2AA">rgb(32, 178, 170)</td></tr><tr><td><font color="LightSkyBlue">LightSkyBlue</font></td><td><font color="#87CEFA">#87CEFA</font></td><td bgcolor="#87CEFA">rgb(135, 206, 250)</td></tr><tr><td><font color="LightSlateBlue">LightSlateBlue</font></td><td><font color="#8470FF">#8470FF</font></td><td bgcolor="#8470FF">rgb(132, 112, 255)</td></tr><tr><td><font color="LightSlateGray">LightSlateGray</font></td><td><font color="#778899">#778899</font></td><td bgcolor="#778899">rgb(119, 136, 153)</td></tr><tr><td><font color="LightSteelBlue">LightSteelBlue</font></td><td><font color="#B0C4DE">#B0C4DE</font></td><td bgcolor="#B0C4DE">rgb(176, 196, 222)</td></tr><tr><td><font color="LightYellow">LightYellow</font></td><td><font color="#FFFFE0">#FFFFE0</font></td><td bgcolor="#FFFFE0">rgb(255, 255, 224)</td></tr><tr><td><font color="Lime">Lime</font></td><td><font color="#00FF00">#00FF00</font></td><td bgcolor="#00FF00">rgb(0, 255, 0)</td></tr><tr><td><font color="LimeGreen">LimeGreen</font></td><td><font color="#32CD32">#32CD32</font></td><td bgcolor="#32CD32">rgb(50, 205, 50)</td></tr><tr><td><font color="Linen">Linen</font></td><td><font color="#FAF0E6">#FAF0E6</font></td><td bgcolor="#FAF0E6">rgb(250, 240, 230)</td></tr><tr><td><font color="Magenta">Magenta</font></td><td><font color="#FF00FF">#FF00FF</font></td><td bgcolor="#FF00FF">rgb(255, 0, 255)</td></tr><tr><td><font color="Maroon">Maroon</font></td><td><font color="#800000">#800000</font></td><td bgcolor="#800000">rgb(128, 0, 0)</td></tr><tr><td><font color="MediumAquaMarine">MediumAquaMarine</font></td><td><font color="#66CDAA">#66CDAA</font></td><td bgcolor="#66CDAA">rgb(102, 205, 170)</td></tr><tr><td><font color="MediumBlue">MediumBlue</font></td><td><font color="#0000CD">#0000CD</font></td><td bgcolor="#0000CD">rgb(0, 0, 205)</td></tr><tr><td><font color="MediumOrchid">MediumOrchid</font></td><td><font color="#BA55D3">#BA55D3</font></td><td bgcolor="#BA55D3">rgb(186, 85, 211)</td></tr><tr><td><font color="MediumPurple">MediumPurple</font></td><td><font color="#9370D8">#9370D8</font></td><td bgcolor="#9370D8">rgb(147, 112, 216)</td></tr><tr><td><font color="MediumSeaGreen">MediumSeaGreen</font></td><td><font color="#3CB371">#3CB371</font></td><td bgcolor="#3CB371">rgb(60, 179, 113)</td></tr><tr><td><font color="MediumSlateBlue">MediumSlateBlue</font></td><td><font color="#7B68EE">#7B68EE</font></td><td bgcolor="#7B68EE">rgb(123, 104, 238)</td></tr><tr><td><font color="MediumSpringGreen">MediumSpringGreen</font></td><td><font color="#00FA9A">#00FA9A</font></td><td bgcolor="#00FA9A">rgb(0, 250, 154)</td></tr><tr><td><font color="MediumTurquoise">MediumTurquoise</font></td><td><font color="#48D1CC">#48D1CC</font></td><td bgcolor="#48D1CC">rgb(72, 209, 204)</td></tr><tr><td><font color="MediumVioletRed">MediumVioletRed</font></td><td><font color="#C71585">#C71585</font></td><td bgcolor="#C71585">rgb(199, 21, 133)</td></tr><tr><td><font color="MidnightBlue">MidnightBlue</font></td><td><font color="#191970">#191970</font></td><td bgcolor="#191970">rgb(25, 25, 112)</td></tr><tr><td><font color="MintCream">MintCream</font></td><td><font color="#F5FFFA">#F5FFFA</font></td><td bgcolor="#F5FFFA">rgb(245, 255, 250)</td></tr><tr><td><font color="MistyRose">MistyRose</font></td><td><font color="#FFE4E1">#FFE4E1</font></td><td bgcolor="#FFE4E1">rgb(255, 228, 225)</td></tr><tr><td><font color="Moccasin">Moccasin</font></td><td><font color="#FFE4B5">#FFE4B5</font></td><td bgcolor="#FFE4B5">rgb(255, 228, 181)</td></tr><tr><td><font color="NavajoWhite">NavajoWhite</font></td><td><font color="#FFDEAD">#FFDEAD</font></td><td bgcolor="#FFDEAD">rgb(255, 222, 173)</td></tr><tr><td><font color="Navy">Navy</font></td><td><font color="#000080">#000080</font></td><td bgcolor="#000080">rgb(0, 0, 128)</td></tr><tr><td><font color="OldLace">OldLace</font></td><td><font color="#FDF5E6">#FDF5E6</font></td><td bgcolor="#FDF5E6">rgb(253, 245, 230)</td></tr><tr><td><font color="Olive">Olive</font></td><td><font color="#808000">#808000</font></td><td bgcolor="#808000">rgb(128, 128, 0)</td></tr><tr><td><font color="OliveDrab">OliveDrab</font></td><td><font color="#6B8E23">#6B8E23</font></td><td bgcolor="#6B8E23">rgb(107, 142, 35)</td></tr><tr><td><font color="Orange">Orange</font></td><td><font color="#FFA500">#FFA500</font></td><td bgcolor="#FFA500">rgb(255, 165, 0)</td></tr><tr><td><font color="OrangeRed">OrangeRed</font></td><td><font color="#FF4500">#FF4500</font></td><td bgcolor="#FF4500">rgb(255, 69, 0)</td></tr><tr><td><font color="Orchid">Orchid</font></td><td><font color="#DA70D6">#DA70D6</font></td><td bgcolor="#DA70D6">rgb(218, 112, 214)</td></tr><tr><td><font color="PaleGoldenRod">PaleGoldenRod</font></td><td><font color="#EEE8AA">#EEE8AA</font></td><td bgcolor="#EEE8AA">rgb(238, 232, 170)</td></tr><tr><td><font color="PaleGreen">PaleGreen</font></td><td><font color="#98FB98">#98FB98</font></td><td bgcolor="#98FB98">rgb(152, 251, 152)</td></tr><tr><td><font color="PaleTurquoise">PaleTurquoise</font></td><td><font color="#AFEEEE">#AFEEEE</font></td><td bgcolor="#AFEEEE">rgb(175, 238, 238)</td></tr><tr><td><font color="PaleVioletRed">PaleVioletRed</font></td><td><font color="#D87093">#D87093</font></td><td bgcolor="#D87093">rgb(216, 112, 147)</td></tr><tr><td><font color="PapayaWhip">PapayaWhip</font></td><td><font color="#FFEFD5">#FFEFD5</font></td><td bgcolor="#FFEFD5">rgb(255, 239, 213)</td></tr><tr><td><font color="PeachPuff">PeachPuff</font></td><td><font color="#FFDAB9">#FFDAB9</font></td><td bgcolor="#FFDAB9">rgb(255, 218, 185)</td></tr><tr><td><font color="Peru">Peru</font></td><td><font color="#CD853F">#CD853F</font></td><td bgcolor="#CD853F">rgb(205, 133, 63)</td></tr><tr><td><font color="Pink">Pink</font></td><td><font color="#FFC0CB">#FFC0CB</font></td><td bgcolor="#FFC0CB">rgb(255, 192, 203)</td></tr><tr><td><font color="Plum">Plum</font></td><td><font color="#DDA0DD">#DDA0DD</font></td><td bgcolor="#DDA0DD">rgb(221, 160, 221)</td></tr><tr><td><font color="PowderBlue">PowderBlue</font></td><td><font color="#B0E0E6">#B0E0E6</font></td><td bgcolor="#B0E0E6">rgb(176, 224, 230)</td></tr><tr><td><font color="Purple">Purple</font></td><td><font color="#800080">#800080</font></td><td bgcolor="#800080">rgb(128, 0, 128)</td></tr><tr><td><font color="Red">Red</font></td><td><font color="#FF0000">#FF0000</font></td><td bgcolor="#FF0000">rgb(255, 0, 0)</td></tr><tr><td><font color="RosyBrown">RosyBrown</font></td><td><font color="#BC8F8F">#BC8F8F</font></td><td bgcolor="#BC8F8F">rgb(188, 143, 143)</td></tr><tr><td><font color="RoyalBlue">RoyalBlue</font></td><td><font color="#4169E1">#4169E1</font></td><td bgcolor="#4169E1">rgb(65, 105, 225)</td></tr><tr><td><font color="SaddleBrown">SaddleBrown</font></td><td><font color="#8B4513">#8B4513</font></td><td bgcolor="#8B4513">rgb(139, 69, 19)</td></tr><tr><td><font color="Salmon">Salmon</font></td><td><font color="#FA8072">#FA8072</font></td><td bgcolor="#FA8072">rgb(250, 128, 114)</td></tr><tr><td><font color="SandyBrown">SandyBrown</font></td><td><font color="#F4A460">#F4A460</font></td><td bgcolor="#F4A460">rgb(244, 164, 96)</td></tr><tr><td><font color="SeaGreen">SeaGreen</font></td><td><font color="#2E8B57">#2E8B57</font></td><td bgcolor="#2E8B57">rgb(46, 139, 87)</td></tr><tr><td><font color="SeaShell">SeaShell</font></td><td><font color="#FFF5EE">#FFF5EE</font></td><td bgcolor="#FFF5EE">rgb(255, 245, 238)</td></tr><tr><td><font color="Sienna">Sienna</font></td><td><font color="#A0522D">#A0522D</font></td><td bgcolor="#A0522D">rgb(160, 82, 45)</td></tr><tr><td><font color="Silver">Silver</font></td><td><font color="#C0C0C0">#C0C0C0</font></td><td bgcolor="#C0C0C0">rgb(192, 192, 192)</td></tr><tr><td><font color="SkyBlue">SkyBlue</font></td><td><font color="#87CEEB">#87CEEB</font></td><td bgcolor="#87CEEB">rgb(135, 206, 235)</td></tr><tr><td><font color="SlateBlue">SlateBlue</font></td><td><font color="#6A5ACD">#6A5ACD</font></td><td bgcolor="#6A5ACD">rgb(106, 90, 205)</td></tr><tr><td><font color="SlateGray">SlateGray</font></td><td><font color="#708090">#708090</font></td><td bgcolor="#708090">rgb(112, 128, 144)</td></tr><tr><td><font color="Snow">Snow</font></td><td><font color="#FFFAFA">#FFFAFA</font></td><td bgcolor="#FFFAFA">rgb(255, 250, 250)</td></tr><tr><td><font color="SpringGreen">SpringGreen</font></td><td><font color="#00FF7F">#00FF7F</font></td><td bgcolor="#00FF7F">rgb(0, 255, 127)</td></tr><tr><td><font color="SteelBlue">SteelBlue</font></td><td><font color="#4682B4">#4682B4</font></td><td bgcolor="#4682B4">rgb(70, 130, 180)</td></tr><tr><td><font color="Tan">Tan</font></td><td><font color="#D2B48C">#D2B48C</font></td><td bgcolor="#D2B48C">rgb(210, 180, 140)</td></tr><tr><td><font color="Teal">Teal</font></td><td><font color="#008080">#008080</font></td><td bgcolor="#008080">rgb(0, 128, 128)</td></tr><tr><td><font color="Thistle">Thistle</font></td><td><font color="#D8BFD8">#D8BFD8</font></td><td bgcolor="#D8BFD8">rgb(216, 191, 216)</td></tr><tr><td><font color="Tomato">Tomato</font></td><td><font color="#FF6347">#FF6347</font></td><td bgcolor="#FF6347">rgb(255, 99, 71)</td></tr><tr><td><font color="Turquoise">Turquoise</font></td><td><font color="#40E0D0">#40E0D0</font></td><td bgcolor="#40E0D0">rgb(64, 224, 208)</td></tr><tr><td><font color="Violet">Violet</font></td><td><font color="#EE82EE">#EE82EE</font></td><td bgcolor="#EE82EE">rgb(238, 130, 238)</td></tr><tr><td><font color="VioletRed">VioletRed</font></td><td><font color="#D02090">#D02090</font></td><td bgcolor="#D02090">rgb(208, 32, 144)</td></tr><tr><td><font color="Wheat">Wheat</font></td><td><font color="#F5DEB3">#F5DEB3</font></td><td bgcolor="#F5DEB3">rgb(245, 222, 179)</td></tr><tr><td><font color="White">White</font></td><td><font color="#FFFFFF">#FFFFFF</font></td><td bgcolor="#FFFFFF">rgb(255, 255, 255)</td></tr><tr><td><font color="WhiteSmoke">WhiteSmoke</font></td><td><font color="#F5F5F5">#F5F5F5</font></td><td bgcolor="#F5F5F5">rgb(245, 245, 245)</td></tr><tr><td><font color="Yellow">Yellow</font></td><td><font color="#FFFF00">#FFFF00</font></td><td bgcolor="#FFFF00">rgb(255, 255, 0)</td></tr><tr><td><font color="YellowGreen">YellowGreen</font></td><td><font color="#9ACD32">#9ACD32</font></td><td bgcolor="#9ACD32">rgb(154, 205, 50)</td></tr></tbody></table></div><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> csdn markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于FOLPD模型的PID控制器参数的整定</title>
      <link href="/posts/e76e.html"/>
      <url>/posts/e76e.html</url>
      
        <content type="html"><![CDATA[<a id="more"></a><blockquote><p>在PID控制器的诸多经典参数整算法中，绝大多数的算法都是在带有时间延迟的一阶模型（FOPDT）的基础上提出的，模型的一般形式为：<img src="https://img-blog.csdnimg.cn/20200311140213707.png#pic_center" alt="  "><br>主要是因为大部分过程控制的受控对象模型的响应曲线和一阶模型的响应较为类似，可以直接进行拟合。<br>一般的过程控制对象的阶跃响应曲线形状如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200311142355557.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt=""></p></blockquote><p><strong>可根据读图、最优降阶方法0/1，最小二乘参数识别的方法求出k,L,T<br>下面给出一个编写的matlab函数用来求k，L，T</strong></p><pre class=" language-c"><code class="language-c">function <span class="token punctuation">[</span>K<span class="token punctuation">,</span>L<span class="token punctuation">,</span>T<span class="token punctuation">,</span>G1<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">getfopdt</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>G<span class="token punctuation">)</span><span class="token keyword">switch</span> key<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>y<span class="token punctuation">,</span>t<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">step</span><span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">;</span>   fun<span class="token operator">=</span>@<span class="token punctuation">(</span>x<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span>t<span class="token operator">-</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">(</span>t<span class="token operator">></span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   x<span class="token operator">=</span><span class="token function">lsqcurvefit</span><span class="token punctuation">(</span>fun<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> K<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> L<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> T<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Kc<span class="token punctuation">,</span>Pm<span class="token punctuation">,</span>wc<span class="token punctuation">,</span>wcp<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">margin</span><span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">;</span>   ikey<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> L<span class="token operator">=</span><span class="token number">1.6</span><span class="token operator">*</span>pi<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">*</span>wc<span class="token punctuation">)</span><span class="token punctuation">;</span> K<span class="token operator">=</span><span class="token function">dcgain</span><span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">;</span> T<span class="token operator">=</span><span class="token number">0.5</span><span class="token operator">*</span>Kc<span class="token operator">*</span>K<span class="token operator">*</span>L<span class="token punctuation">;</span>   <span class="token keyword">if</span> <span class="token function">isfinite</span><span class="token punctuation">(</span>Kc<span class="token punctuation">)</span><span class="token punctuation">,</span> x0<span class="token operator">=</span><span class="token punctuation">[</span>L<span class="token punctuation">;</span>T<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">while</span> ikey<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">,</span> u<span class="token operator">=</span>wc<span class="token operator">*</span><span class="token function">x0</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> v<span class="token operator">=</span>wc<span class="token operator">*</span><span class="token function">x0</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         FF<span class="token operator">=</span><span class="token punctuation">[</span>K<span class="token operator">*</span>Kc<span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">cos</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token operator">-</span>v<span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>v<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token function">sin</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token operator">+</span>v<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   J<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">-</span>K<span class="token operator">*</span>Kc<span class="token operator">*</span>wc<span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token operator">-</span>K<span class="token operator">*</span>Kc<span class="token operator">*</span>wc<span class="token operator">*</span>v<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span>K<span class="token operator">*</span>Kc<span class="token operator">*</span>wc<span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span>wc<span class="token operator">*</span>v<span class="token punctuation">;</span>      wc<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token operator">-</span>wc<span class="token operator">*</span>v<span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span> wc<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span> x1<span class="token operator">=</span>x0<span class="token operator">-</span><span class="token function">inv</span><span class="token punctuation">(</span>J<span class="token punctuation">)</span><span class="token operator">*</span>FF<span class="token punctuation">;</span>         <span class="token keyword">if</span> <span class="token function">norm</span><span class="token punctuation">(</span>x1<span class="token operator">-</span>x0<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">1e-8</span><span class="token punctuation">,</span> ikey<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">else</span><span class="token punctuation">,</span> x0<span class="token operator">=</span>x1<span class="token punctuation">;</span> end<span class="token punctuation">,</span> end      L<span class="token operator">=</span><span class="token function">x0</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> T<span class="token operator">=</span><span class="token function">x0</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   end<span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>n1<span class="token punctuation">,</span>d1<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">tfderv</span><span class="token punctuation">(</span>G<span class="token punctuation">.</span>num<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>G<span class="token punctuation">.</span>den<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">[</span>n2<span class="token punctuation">,</span>d2<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">tfderv</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span> K1<span class="token operator">=</span><span class="token function">dcgain</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>   K2<span class="token operator">=</span><span class="token function">dcgain</span><span class="token punctuation">(</span>n2<span class="token punctuation">,</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span> K<span class="token operator">=</span><span class="token function">dcgain</span><span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">;</span> Tar<span class="token operator">=</span><span class="token operator">-</span>K1<span class="token operator">/</span>K<span class="token punctuation">;</span>   T<span class="token operator">=</span><span class="token function">sqrt</span><span class="token punctuation">(</span>K2<span class="token operator">/</span>K<span class="token operator">-</span>Tar<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> L<span class="token operator">=</span>Tar<span class="token operator">-</span>T<span class="token punctuation">;</span><span class="token keyword">case</span> <span class="token number">4</span>   Gr<span class="token operator">=</span><span class="token function">opt_app</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   L<span class="token operator">=</span>Gr<span class="token punctuation">.</span>ioDelay<span class="token punctuation">;</span>   T<span class="token operator">=</span>Gr<span class="token punctuation">.</span>den<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>Gr<span class="token punctuation">.</span>den<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> K<span class="token operator">=</span>Gr<span class="token punctuation">.</span>num<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">(</span>end<span class="token punctuation">)</span><span class="token operator">/</span>Gr<span class="token punctuation">.</span>den<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>endG1<span class="token operator">=</span><span class="token function">tf</span><span class="token punctuation">(</span>K<span class="token punctuation">,</span><span class="token punctuation">[</span>T <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'iodelay'</span><span class="token punctuation">,</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>function <span class="token punctuation">[</span>e<span class="token punctuation">,</span>f<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">tfderv</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>a<span class="token punctuation">)</span>f<span class="token operator">=</span><span class="token function">conv</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> na<span class="token operator">=</span><span class="token function">length</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> nb<span class="token operator">=</span><span class="token function">length</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>e1<span class="token operator">=</span><span class="token function">conv</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nb<span class="token number">-1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">:</span>end<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>e2<span class="token operator">=</span><span class="token function">conv</span><span class="token punctuation">(</span><span class="token punctuation">(</span>na<span class="token number">-1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">:</span>end<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> maxL<span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">length</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">length</span><span class="token punctuation">(</span>e2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>e<span class="token operator">=</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>maxL<span class="token operator">-</span><span class="token function">length</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">)</span> e1<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>maxL<span class="token operator">-</span><span class="token function">length</span><span class="token punctuation">(</span>e2<span class="token punctuation">)</span><span class="token punctuation">)</span> e2<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>其中输入参数的key变量表示采用的各种方法，可以取值为1,2,3,4.对于已知的阶跃响应数据，通过响应曲线识别一阶模型，key=1，G为受控对象模型。函数返回值为一阶近似模型参数k，L，T和近似的传递函数模型G1.<br>输入变量key=2时表示采用的是基于频率响应的近似方法，<br>输入变量key=3时表示采用的是基于传递函数的辨识方法，<br>输入变量key=4时表示采用的是最优降阶方法。</p><h3 id="Ziegler-Nichols经验公式"><a href="#Ziegler-Nichols经验公式" class="headerlink" title="Ziegler-Nichols经验公式"></a>Ziegler-Nichols经验公式</h3><p>有了这些参数，如何来设计PID控制器呢，我们可以采用经验公式来设计PID控制器。由k，L，T可以计算出一个中间变量a，a=KL/T<br><img src="https://img-blog.csdnimg.cn/20200311145317620.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>这样就可以根据上表设计出P、PI、PID控制器。设计方法非常简单直观，根据此算法编写一个matlab函数帮助计算</p><pre class=" language-c"><code class="language-c">function <span class="token punctuation">[</span>Gc<span class="token punctuation">,</span>Kp<span class="token punctuation">,</span>Ti<span class="token punctuation">,</span>Td<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">ziegler</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>vars<span class="token punctuation">)</span><span class="token keyword">switch</span> <span class="token function">length</span><span class="token punctuation">(</span>vars<span class="token punctuation">)</span>   <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">,</span>      K<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Tc<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> N<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> key<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token number">0.5</span><span class="token operator">*</span>K<span class="token punctuation">;</span> Ti<span class="token operator">=</span>inf<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>      elseif key<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token number">0.4</span><span class="token operator">*</span>K<span class="token punctuation">;</span> Ti<span class="token operator">=</span><span class="token number">0.8</span><span class="token operator">*</span>Tc<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>      elseif key<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token number">0.6</span><span class="token operator">*</span>K<span class="token punctuation">;</span> Ti<span class="token operator">=</span><span class="token number">0.5</span><span class="token operator">*</span>Tc<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0.12</span><span class="token operator">*</span>Tc<span class="token punctuation">;</span> end   <span class="token keyword">case</span> <span class="token number">4</span>      K<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> L<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> T<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> N<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> a<span class="token operator">=</span>K<span class="token operator">*</span>L<span class="token operator">/</span>T<span class="token punctuation">;</span>      <span class="token keyword">if</span> key<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span>a<span class="token punctuation">;</span> Ti<span class="token operator">=</span>inf<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>      elseif key<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token number">0.9</span><span class="token operator">/</span>a<span class="token punctuation">;</span> Ti<span class="token operator">=</span><span class="token number">3</span><span class="token operator">*</span>L<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>      elseif key<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token number">1.2</span><span class="token operator">/</span>a<span class="token punctuation">;</span> Ti<span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>L<span class="token punctuation">;</span> Td<span class="token operator">=</span>L<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> end   <span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">,</span>      K<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Tc<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> rb<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> N<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      pb<span class="token operator">=</span>pi<span class="token operator">*</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span> Kp<span class="token operator">=</span>K<span class="token operator">*</span>rb<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>pb<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> key<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">,</span> Ti<span class="token operator">=</span><span class="token operator">-</span>Tc<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>pi<span class="token operator">*</span><span class="token function">tan</span><span class="token punctuation">(</span>pb<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>      elseif key<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">,</span> Ti<span class="token operator">=</span>Tc<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token function">sin</span><span class="token punctuation">(</span>pb<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>pi<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>pb<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Td<span class="token operator">=</span>Ti<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">;</span>end<span class="token punctuation">,</span> endGc<span class="token operator">=</span><span class="token function">pidstd</span><span class="token punctuation">(</span>Kp<span class="token punctuation">,</span>Ti<span class="token punctuation">,</span>Td<span class="token punctuation">,</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>这里的key=1,2,3分别对应于P、PI、PID控制器，用户可以选择控制器类型。vars=[K,L,T,N]。</p><h3 id="Chien-Hrones-Reswick参数整定算法"><a href="#Chien-Hrones-Reswick参数整定算法" class="headerlink" title="Chien-Hrones-Reswick参数整定算法"></a>Chien-Hrones-Reswick参数整定算法</h3><p>在实际应用中，传统的Ziegler-Nichols算法有各种各样的变形，其中的Chien-Hrones-Reswick（CHR）就是其中的一种改进。其允许带有较大的阻尼，以确保没有超调量的快速响应。分为有0%超调量和20%超调量。在CHR算法中直接使用了时间常数。<br><img src="https://img-blog.csdnimg.cn/20200311151653145.png" alt="  "><br>按此算法编写的matlab函数：</p><pre class=" language-c"><code class="language-c"> function <span class="token punctuation">[</span>Gc<span class="token punctuation">,</span>Kp<span class="token punctuation">,</span>Ti<span class="token punctuation">,</span>Td<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">chrpid</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>vars<span class="token punctuation">)</span>K<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> L<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> T<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> N<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ov<span class="token operator">=</span><span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>a<span class="token operator">=</span>K<span class="token operator">*</span>L<span class="token operator">/</span>T<span class="token punctuation">;</span> KK<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.35</span><span class="token punctuation">,</span><span class="token number">1.2</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">;</span> <span class="token number">0.7</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0.95</span><span class="token punctuation">,</span><span class="token number">1.4</span><span class="token punctuation">,</span><span class="token number">0.47</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> key<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token function">KK</span><span class="token punctuation">(</span>ov<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>a<span class="token punctuation">;</span> Ti<span class="token operator">=</span>inf<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>elseif key<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token function">KK</span><span class="token punctuation">(</span>ov<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span>a<span class="token punctuation">;</span> Ti<span class="token operator">=</span><span class="token function">KK</span><span class="token punctuation">(</span>ov<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">*</span>T<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token punctuation">,</span> Kp<span class="token operator">=</span><span class="token function">KK</span><span class="token punctuation">(</span>ov<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">/</span>a<span class="token punctuation">;</span> Ti<span class="token operator">=</span><span class="token function">KK</span><span class="token punctuation">(</span>ov<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">*</span>T<span class="token punctuation">;</span> Td<span class="token operator">=</span><span class="token function">KK</span><span class="token punctuation">(</span>ov<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token operator">*</span>L<span class="token punctuation">;</span> endGc<span class="token operator">=</span><span class="token function">pidstd</span><span class="token punctuation">(</span>Kp<span class="token punctuation">,</span>Ti<span class="token punctuation">,</span>Td<span class="token punctuation">,</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>该函数的调用格式为 [Gc,Kp,Ti,Td]=chrpid(key,vars)，其返回的变量和函数ziegler（）是完全一致的。key=1,2,3分别对应于P、PI、PID控制器，变量vars可以表示为vars=[k,L,T,N,Os]，Os=0对应于没有超调量的控制，Os=1对应于有20%超调量的控制。<br>假设对象模型为一个六阶的传递函数G（s）=1/(s+1)^6<br>可以用下门面的matlab语句设计出Ziegler-Nichols PID控制器与两种准则下的CHR控制器。</p><pre class=" language-c"><code class="language-c">s<span class="token operator">=</span><span class="token function">tf</span><span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>G<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token punctuation">(</span>s<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">6</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>k<span class="token punctuation">,</span>L<span class="token punctuation">,</span>T<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">getfopdt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>G<span class="token punctuation">)</span><span class="token punctuation">;</span> N<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">[</span>Gc1<span class="token punctuation">,</span>Kp<span class="token punctuation">,</span>Ti<span class="token punctuation">,</span>Td<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">ziegler</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span>k<span class="token punctuation">,</span>L<span class="token punctuation">,</span>T<span class="token punctuation">,</span>N<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span>Gc2<span class="token punctuation">,</span>Kp<span class="token punctuation">,</span>Ti<span class="token punctuation">,</span>Td<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">chrpid</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span>k<span class="token punctuation">,</span>L<span class="token punctuation">,</span>T<span class="token punctuation">,</span>N<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">[</span>Gc3<span class="token punctuation">,</span>Kp<span class="token punctuation">,</span>Ti<span class="token punctuation">,</span>Td<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">chrpid</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span>k<span class="token punctuation">,</span>L<span class="token punctuation">,</span>T<span class="token punctuation">,</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>绘制出不同控制器下的闭环系统的阶跃响应曲线：</p><pre class=" language-c"><code class="language-c"><span class="token function">step</span><span class="token punctuation">(</span><span class="token function">feedback</span><span class="token punctuation">(</span>G<span class="token operator">*</span>Gc1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span><span class="token function">feedback</span><span class="token punctuation">(</span>G<span class="token operator">*</span>Gc2<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'--'</span><span class="token punctuation">,</span><span class="token function">feedback</span><span class="token punctuation">(</span>G<span class="token operator">*</span>Gc3<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span></code></pre><p><img src="https://img-blog.csdnimg.cn/20200311155153501.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>从曲线的结果可以看出，虽然没有超调量的设定点控制器响应速度较慢，但控制的效果还比较理想，优于经典的 Ziegler-Nichols算法。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 控制 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PID控制的理解与参数整定</title>
      <link href="/posts/20ab.html"/>
      <url>/posts/20ab.html</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h3 id="PID控制器的一般结构"><a href="#PID控制器的一般结构" class="headerlink" title="PID控制器的一般结构"></a>PID控制器的一般结构</h3><blockquote><p>当控制器为比例控制器（P）时，可以减少因扰动而引起的稳态误差，但不能将稳态误差减少到0，增加一项正比于误差的积分项（I）时，可以消除系统的稳态误差，但会影响系统的动态性能，可再加入一个微分项（D）来提高系统的动态性能。由比例，积分，微分三项构成的控制器就是经典的PID控制器。<br><img src="https://img-blog.csdnimg.cn/20200311112849195.png" alt="  "><br>由于理论上的控制器有的时候产生的信号过大，可能破坏硬件系统，所以在控制器的输出端通常要加一个驱动饱和来保护这样一个信号，使得它不至于过大。<br>PID控制器的一般形式<br><img src="https://img-blog.csdnimg.cn/20200311113052968.png" alt="  "><br>PID控制器是由e信号驱动的，而e信号是跟踪误差，由e信号的当前时刻的值，e信号的积分以及e信号的导数，由这样三个信号的加权和共同构造出来一个控制信号u(t)。<br>e信号的积分的物理含义：表示e信号以往值的和，利用这一项可以表示e信号过去的信息。e信号的导数可以认为其预测着e信号的将来信息。<br><img src="https://img-blog.csdnimg.cn/2020031111524454.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "></p></blockquote><hr><p><img src="https://img-blog.csdnimg.cn/20200311115800499.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "></p><hr><p>==PID控制的原理可以用人对炉温的手动控制来理解==</p><h3 id="1．比例控制"><a href="#1．比例控制" class="headerlink" title="1．比例控制"></a>1．比例控制</h3><p>   有经验的操作人员手动控制电加热炉的炉温，可以获得非常好的控制品质，PID控制与人工控制的控制策略有很多相似的地方。<br>   下面介绍操作人员怎样用比例控制的思想来手动控制电加热炉的炉温。假设用热电偶检测炉温，用数字仪表显示温度值。在控制过程中，操作人员用眼睛读取炉温，并与炉温给定值比较，得到温度的误差值。然后用手操作电位器，调节加热的电流，使炉温保持在给定值附近。<br>   操作人员知道炉温稳定在给定值时电位器的大致位置（我们将它称为位置L），并根据当时的温度误差值调整控制加热电流的电位器的转角。炉温小于给定值时，误差为正，在位置L的基础上顺时针增大电位器的转角，以增大加热的电流。炉温大于给定值时，误差为负，在位置L的基础上反时针减小电位器的转角，并令转角与位置L的差值与误差成正比。上述控制策略就是比例控制，即PID控制器输出中的比例部分与误差成正比。<br>   闭环中存在着各种各样的延迟作用。例如调节电位器转角后，到温度上升到新的转角对应的稳态值时有较大的时间延迟。由于延迟因素的存在，调节电位器转角后不能马上看到调节的效果，因此闭环控制系统调节困难的主要原因是系统中的延迟作用。<br>   比例控制的比例系数如果太小，即调节后的电位器转角与位置L的差值太小，调节的力度不够，使系统输出量变化缓慢，调节所需的总时间过长。比例系数如果过大，即调节后电位器转角与位置L的差值过大，调节力度太强，将造成调节过头，甚至使温度忽高忽低，来回震荡。<br>   增大比例系数使系统反应灵敏，调节速度加快，并且可以减小稳态误差。但是比例系数过大会使超调量增大，振荡次数增加，调节时间加长，动态性能变坏，比例系数太大甚至会使闭环系统不稳定。<br>   单纯的比例控制很难保证调节得恰到好处，完全消除误差。</p><h3 id="2．积分控制"><a href="#2．积分控制" class="headerlink" title="2．积分控制"></a>2．积分控制</h3><p>   PID控制器中的积分对应于图1中误差曲线 与坐标轴包围的面积（图中的灰色部分）。PID控制程序是周期性执行的，执行的周期称为采样周期。计算机的程序用图1中各矩形面积之和来近似精确的积分，图中的TS就是采样周期。<br><img src="https://img-blog.csdnimg.cn/20200311115641859.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br> 　　　　　图1  积分运算示意图<br>　　每次PID运算时，在原来的积分值的基础上，增加一个与当前的误差值ev（n）成正比的微小部分。误差为负值时，积分的增量为负。<br>   　　手动调节温度时，积分控制相当于根据当时的误差值，周期性地微调电位器的角度，每次调节的角度增量值与当时的误差值成正比。温度低于设定值时误差为正，积分项增大，使加热电流逐渐增大，反之积分项减小。因此只要误差不为零，控制器的输出就会因为积分作用而不断变化。积分调节的“大方向”是正确的，积分项有减小误差的作用。一直要到系统处于稳定状态，这时误差恒为零，比例部分和微分部分均为零，积分部分才不再变化，并且刚好等于稳态时需要的控制器的输出值，对应于上述温度控制系统中电位器转角的位置L。因此积分部分的作用是消除稳态误差，提高控制精度，积分作用一般是必须的。<br> 　　PID控制器输出中的积分部分与误差的积分成正比。因为积分时间TI在积分项的分母中，TI越小，积分项变化的速度越快，积分作用越强。</p><h3 id="3．PI控制"><a href="#3．PI控制" class="headerlink" title="3．PI控制"></a>3．PI控制</h3><p>   控制器输出中的积分项与当前的误差值和过去历次误差值的累加值成正比，因此积分作用本身具有严重的滞后特性，对系统的稳定性不利。如果积分项的系数设置得不好，其负面作用很难通过积分作用本身迅速地修正。而比例项没有延迟，只要误差一出现，比例部分就会立即起作用。因此积分作用很少单独使用，它一般与比例和微分联合使用，组成PI或PID控制器。<br>   PI和PID控制器既克服了单纯的比例调节有稳态误差的缺点，又避免了单纯的积分调节响应慢、动态性能不好的缺点，因此被广泛使用。<br>   如果控制器有积分作用（例如采用PI或PID控制），积分能消除阶跃输入的稳态误差，这时可以将比例系数调得小一些。<br>   如果积分作用太强（即积分时间太小），相当于每次微调电位器的角度值过大，其累积的作用会使系统输出的动态性能变差，超调量增大，甚至使系统不稳定。积分作用太弱（即积分时间太大），则消除稳态误差的速度太慢，积分时间的值应取得适中。</p><h3 id="4．微分作用"><a href="#4．微分作用" class="headerlink" title="4．微分作用"></a>4．微分作用</h3><p>   误差的微分就是误差的变化速率，误差变化越快，其微分绝对值越大。误差增大时，其微分为正；误差减小时，其微分为负。控制器输出量的微分部分与误差的微分成正比，反映了被控量变化的趋势。<br>   有经验的操作人员在温度上升过快，但是尚未达到设定值时，根据温度变化的趋势，预感到温度将会超过设定值，出现超调。于是调节电位器的转角，提前减小加热的电流。这相当于士兵射击远方的移动目标时，考虑到子弹运动的时间，需要一定的提前量一样。</p><p>图2   阶跃响应曲线</p><p>   图2中的c (∞)为被控量c (t)的稳态值或被控量的期望值，误差e(t) = c (∞) - c (t)。在图2中启动过程的上升阶段，当 时，被控量尚未超过其稳态值。但是因为误差e(t)不断减小，误差的微分和控制器输出的微分部分为负值，减小了控制器的输出量，相当于提前给出了制动作用，以阻碍被控量的上升，所以可以减少超调量。因此微分控制具有超前和预测的特性，在超调尚未出现之前，就能提前给出控制作用。<br>   闭环控制系统的振荡甚至不稳定的根本原因在于有较大的滞后因素。因为微分项能预测误差变化的趋势，这种“超前”的作用可以抵消滞后因素的影响。适当的微分控制作用可以使超调量减小，增加系统的稳定性。<br>   对于有较大的滞后特性的被控对象，如果PI控制的效果不理想，可以考虑增加微分控制，以改善系统在调节过程中的动态特性。如果将微分时间设置为0，微分部分将不起作用。<br>   微分时间与微分作用的强弱成正比，微分时间越大，微分作用越强。如果微分时间太大，在误差快速变化时，响应曲线上可能会出现“毛刺”。<br>   微分控制的缺点是对干扰噪声敏感，使系统抑制干扰的能力降低。为此可在微分部分增加惯性滤波环节。</p><h3 id="5．采样周期"><a href="#5．采样周期" class="headerlink" title="5．采样周期"></a>5．采样周期</h3><p>   PID控制程序是周期性执行的，执行的周期称为采样周期。采样周期越小，采样值越能反映模拟量的变化情况。但是太小会增加CPU的运算工作量，相邻两次采样的差值几乎没有什么变化，将使PID控制器输出的微分部分接近为零，所以也不宜将采样周期取得过小。<br>   应保证在被控量迅速变化时（例如启动过程中的上升阶段），能有足够多的采样点数，不致因为采样点数过少而丢失被采集的模拟量中的重要信息。</p><h3 id="6．PID参数的调整方法"><a href="#6．PID参数的调整方法" class="headerlink" title="6．PID参数的调整方法"></a>6．PID参数的调整方法</h3><p>   在整定PID控制器参数时，可以根据控制器的参数与系统动态性能和稳态性能之间的定性关系，用实验的方法来调节控制器的参数。有经验的调试人员一般可以较快地得到较为满意的调试结果。在调试中最重要的问题是在系统性能不能令人满意时，知道应该调节哪一个参数，该参数应该增大还是减小。<br>   为了减少需要整定的参数，首先可以采用PI控制器。为了保证系统的安全，在调试开始时应设置比较保守的参数，例如比例系数不要太大，积分时间不要太小，以避免出现系统不稳定或超调量过大的异常情况。给出一个阶跃给定信号，根据被控量的输出波形可以获得系统性能的信息，例如超调量和调节时间。应根据PID参数与系统性能的关系，反复调节PID的参数。<br>   如果阶跃响应的超调量太大，经过多次振荡才能稳定或者根本不稳定，应减小比例系数、增大积分时间。如果阶跃响应没有超调量，但是被控量上升过于缓慢，过渡过程时间太长，应按相反的方向调整参数。<br>   如果消除误差的速度较慢，可以适当减小积分时间，增强积分作用。<br>   反复调节比例系数和积分时间，如果超调量仍然较大，可以加入微分控制，微分时间从0逐渐增大，反复调节控制器的比例、积分和微分部分的参数。<br>   总之，PID参数的调试是一个综合的、各参数互相影响的过程，实际调试过程中的多次尝试是非常重要的，也是必须的。</p><hr><h2 id="一种通俗易懂的讲解"><a href="#一种通俗易懂的讲解" class="headerlink" title="一种通俗易懂的讲解"></a>一种通俗易懂的讲解</h2><p>控制模型：你控制一个人让他以PID控制的方式走110步后停下。<br>（1）P比例控制，就是让他走110步，他按照一定的步伐走到一百零几步（如108步）或100多步（如112步）就停了。<br>说明：<br>P比例控制是一种最简单的控制方式。其控制器的输出与输入误差信号成比例关系。当仅有比例控制时系统输出存在稳态误差（Steady-state error）。<br>（2）PI积分控制，就是他按照一定的步伐走到112步然后回头接着走，走到108步位置时，然后又回头向110步位置走。在110步位置处来回晃几次，最后停在110步的位置。<br>说明：<br>在积分I控制中，控制器的输出与输入误差信号的积分成正比关系。对一个自动控制系统，如果在进入稳态后存在稳态误差，则称这个控制系统是有稳态误差的或简称有差系统（System with Steady-state Error）。为了消除稳态误差，在控制器中必须引入“积分项”。积分项对误差取决于时间的积分，随着时间的增加，积分项会增大。这样，即便误差很小，积分项也会随着时间的增加而加大，它推动控制器的输出增大使稳态误差进一步减小，直到等于零。因此，比例+积分（PI）控制器，可以使系统在进入稳态后无稳态误差。<br>（3）PD微分控制，就是他按照一定的步伐走到一百零几步后，再慢慢地向110步的位置靠近，如果最后能精确停在110步的位置，就是无静差控制；如果停在110步附近（如109步或111步位置），就是有静差控制。<br>说明：<br>在微分控制D中，控制器的输出与输入误差信号的微分（即误差的变化率）成正比关系。<br>自动控制系统在克服误差的调节过程中可能会出现振荡甚至失稳，其原因是由于存在有较大惯性组件（环节）或有滞后（delay）组件，具有抑制误差的作用，其变化总是落后于误差的变化。解决的办法是使抑制误差作用的变化“超前”，即在误差接近零时，抑制误差的作用就应该是零。这就是说，在控制器中仅引入“比例P”项往往是不够的，比例项的作用仅是放大误差的幅值，而目前需要增加的是“微分项”，它能预测误差变化的趋势。这样，具有比例+微分的控制器，就能够提前使抑制误差的控制作用等于零，甚至为负值，从而避免了被控量的严重超调。所以对有较大惯性或滞后的被控对象，比例P+微分D（PD）控制器能改善系统在调节过程中的动态特性。</p><p>PID常用口诀:<br>参数整定找最佳，从小到大顺序查，<br>先是比例后积分，最后再把微分加，<br>曲线振荡很频繁，比例度盘要放大，<br>曲线漂浮绕大湾，比例度盘往小扳，<br>曲线偏离回复慢，积分时间往下降，<br>曲线波动周期长，积分时间再加长，<br>曲线振荡频率快，先把微分降下来，<br>动差大来波动慢，微分时间应加长，<br>理想曲线两个波，前高后低四比一，<br>一看二调多分析，调节质量不会低</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 控制 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>基本的bash shell命令（一）</title>
      <link href="/posts/87b0.html"/>
      <url>/posts/87b0.html</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="linux文件系统"><a href="#linux文件系统" class="headerlink" title="linux文件系统"></a>linux文件系统</h2><p>不同于windows使用驱动器盘符，linux将文件存储在单个目录结构中，该目录被称为虚拟目录。Linux虚拟目录结构只包含一个称为根（ root）目录的基础目录。根目录下的目录和文件会按照访问它们的目录路径一一列出。<br>通常系统文件存储在根驱动器中，而用户文件则存储在另一驱动器中。<br><img src="https://img-blog.csdnimg.cn/20200226095654707.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br> 　　　　　　　　　　　　==<strong>常见的linux目录</strong>==<br>|     /     | 虚拟目录的根目录                                          |<br>| :——-: | ——————————————————— |<br>|   /bin    | 二进制目录，存放许多用户级的GNU工具                       |<br>|   /boot   | 启动目录，存放启动文件                                    |<br>|   /dev    | 设备目录， Linux在这里创建设备节点                        |<br>| <strong>/etc</strong>  | 系统配置文件目录                                          |<br>| <strong>/home</strong> | 主目录， Linux在这里创建用户目录                          |<br>|   /lib    | 库目录，存放系统和应用程序的库文件                        |<br>|  /media   | 媒体目录，可移动媒体设备的常用挂载点                      |<br>| <strong>/mnt</strong>  | 挂载目录，另一个可移动媒体设备的常用挂载点                |<br>|   /opt    | 可选目录，常用于存放第三方软件包和数据文件                |<br>|   /proc   | 进程目录，存放现有硬件及当前进程的相关信息                |<br>| <strong>/root</strong> | root用户的主目录                                          |<br>|   /sbin   | 系统二进制目录，存放许多GNU管理员级工具                   |<br>|   /run    | 运行目录，存放系统运作时的运行时数据                      |<br>|   /srv    | 服务目录，存放本地服务的相关文件                          |<br>|   /sys    | 系统目录，存放系统硬件信息的相关文件                      |<br>|   /tmp    | 临时目录，可以在该目录中创建和删除临时工作文件            |<br>|   /usr    | 用户二进制目录，大量用户级的GNU工具和数据文件都存储在这里 |<br>|   /var    | 可变目录，用以存放经常变化的文件，比如日志文件            |</p><h2 id="查看文件内容命令"><a href="#查看文件内容命令" class="headerlink" title="查看文件内容命令"></a>查看文件内容命令</h2><h3 id="查看文件类型"><a href="#查看文件类型" class="headerlink" title="查看文件类型"></a>查看文件类型</h3><p>file命令：file 文件名<br>　　查看二进制可执行程序。 file命令能够确定该程序编译时所面向的平台以及需要何种类型的库。<img src="https://img-blog.csdnimg.cn/20200222203129530.png" alt="  "></p><h3 id="查看整个文件"><a href="#查看整个文件" class="headerlink" title="查看整个文件"></a>查看整个文件</h3><p>cat命令<br>|cat -n|给所有的行加上行号  |<br>|–  |–|<br>| cat -b | 给有文本的行加上行号 |<br>|cat -T  |不让制表符出现，用^I字符组合去替换文中的所有制表符。 |</p><ol><li>tail命令：默认显示文件末尾10行的内容<br>可以向tail命令中加入-n参数来修改所显示的行数。  tail -n 2 log-file 显示文件的最后两行<blockquote><p>tail -f 允许在其他进程使用该文件时查看文件的内容。tail命令会保持活动状态，并不断显示添加到文件中的内容。可以实时监测系统日志。</p></blockquote></li></ol><p>2.head命令：默认显示文件前10行的文本<br>类似于tail命令，head -n 显示文件的前n行。同样也支持-f参数。</p><p>当程序运行在系统上时，称之为进程，要监测这些进程，需要用ps命令。ps命令提供进程的一次性查看，即列出的是当前正在运行的进程的快照。<br>  ps命令标识进程的五种状态码</p><ul><li>D不可中断：uninterruptible sleep (usually IO）</li><li>R运行：runnable</li><li>S中断：sleeping<ul><li>T停止：traced or stopped</li><li>Z僵死：a defunct (”zombie”) process <h2 id="监测程序"><a href="#监测程序" class="headerlink" title="监测程序"></a>监测程序</h2><h4 id="ps命令常用参数："><a href="#ps命令常用参数：" class="headerlink" title="ps命令常用参数："></a>ps命令常用参数：</h4><table><thead><tr><th align="center">参数</th><th>功能</th></tr></thead><tbody><tr><td align="center">a</td><td>显示所有进程</td></tr><tr><td align="center">-a</td><td>显示同一终端下的所行程序</td></tr><tr><td align="center">-A或-e</td><td>显示所有进程</td></tr><tr><td align="center">c</td><td>显示进程的其实名称</td></tr><tr><td align="center">e</td><td>显示环境变量</td></tr><tr><td align="center">f</td><td>显示程序间的关系</td></tr><tr><td align="center">-H</td><td>显示树状结构</td></tr><tr><td align="center">r</td><td>显示当前终端的进程</td></tr><tr><td align="center">u</td><td>指定用户的所有进程</td></tr><tr><td align="center">-au</td><td>显示较详细的咨询</td></tr><tr><td align="center">-aux</td><td>显示所有包含其他使用者的行程</td></tr><tr><td align="center">T</td><td>显示当前终端的所有程序</td></tr></tbody></table></li></ul></li></ul><p>命令：ps -ef 显示所有进程信息，连通命令行。扩展参数组合-e参数指定显示所有运行在系统上的进程； -f参数则扩展了输出<br>命令：ps -ef|grep  ps与grep常用组合用法，查找特定进程</p><blockquote><p>命令：ps -l<img src="https://img-blog.csdnimg.cn/20200223105138912.png" alt="  "></p></blockquote><p>1) F：代表这个程序的旗标（ flag), 4 代表使用者为 super user。<br>2) S：代表这个程序的状态（ STAT），关于各 STAT 的意义将在下文中介绍 。<br>3) UID：程序被该 UID 所拥有 。<br>4) PID：这个程序的进程 id。<br>5) PPID ：其父进程的进程 id。<br>6) C：使用的 CPU 资源百分比 。<br>7) PRI：Priority （优先执行序）的缩写 。<br>8) NI：Nice 值。<br>9) ADDR：kernel function，指出该程序在内存的那个部分。 如果是个 running 的程序，一般就是”-“ 。<br>10) sz： 使用掉的内存大小 。<br>11) WCHAN： 目前这个程序是否正在运作当中，若为-表示正在运作 。<br>12) TTY： 登入者的终端机位置。<br>13) TIME：使用掉的 CPU 时间 。<br>14) CMD： 所下达的指令内容 。</p><p><strong>==top命令：实时显示系统重各个进程的资源占用状况==</strong><br><img src="https://img-blog.csdnimg.cn/20200223110145166.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "></p><p>第 1 行分别显示：系统当前时间、系统运行时间、当前用户登录数和系统负载 。 系统负载（ load average ），这里有 3 个数值，分别是系统最近 lmin 、 5min 、 15min 的平均负载。 一般对于单个处理器来说，负载在0-1之间是正常的。<br>第 2 行分别显示： total （进程总数）、running （正在运行的进程数）、 sleeping （睡眠的进程数）、stopped （停止的进程数）和 zombie （僵尸进程数） 。<br>第 3 行分别显示： %us（用户空间占用 CPU 百分比）、%sy（内核空间占用 CPU 百分比）、%ni（用户进程空间内改变过优先级的进程占用 CPU 百分比）、 %id （空闲 CPU 百分比）、%wa （等待输入输出（I/O）的 CPU 时间百分比）、 %hi ( cpu 处理硬件中断的时间）、%si ( cpu 处理软中断的时间）、%st （用于有虚拟 cpu 的情况） 。通常 id% 值可以反映一个系统 cpu 的闲忙程度 。<br>第 4 行则显示内存 MEM 的数据： total （物理内存总量）、 used （使用的物理内存总量 ）、free （空闲内存总量）、 buffers （用作内核缓存的内存量） 。<br>第 5 行则显示交换器 SWAP 的数据： total（交换区总量）、used（使用的交换区总量）、 free （空闲交换区总量） 、 cached （缓冲的交换区总量） 。<br>第 6 行则显示 PID （进程号）、USER （运行用户）、PR （优先级）、NI （任务 nice 值）、VIRT （虚拟内存用量）VIRT=SWAP+RES,RES（物理内存用量）、 SHR（共享内存用量）、 S（进程状态）、 %CPU(CPU 占用比）、 %MEM （物理内存占用比）、 TIME+ （累计 CPU 占用时间）、 COMMAND 命令名／命令行。</p><p><strong>df -h</strong> 查看所有已挂载磁盘的使用情况<br><img src="https://img-blog.csdnimg.cn/20200223161455522.png" alt="zxc"></p><blockquote><p>du命令：显示当前目录下所有的文件、目录和子目录的磁盘使用情况。<br>du -c：显示所有已列出文件总的大小。<br>du -h：按用户易读的格式输出大小，即用K替代千字节，用M替代兆字节，用G替代吉字节<br>du -s：显示每个输出参数的总计</p></blockquote><h3 id="排序数据"><a href="#排序数据" class="headerlink" title="排序数据"></a>排序数据</h3><p>sort -n 将数字当做数字而不是字符，按值排序</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>stm32mp1开发板入门pangu</title>
      <link href="/posts/29d1.html"/>
      <url>/posts/29d1.html</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="pangu开发板介绍"><a href="#pangu开发板介绍" class="headerlink" title="pangu开发板介绍"></a>pangu开发板介绍</h2><p><strong>pangu开发板</strong>主芯片基于ST公司STM32MP1系列微处理器（ARM dual Cortex-A7 650Mhz + Cortex-M4）<br> <img src="https://img-blog.csdnimg.cn/20200222114447932.png" alt="  "><br> <img src="https://img-blog.csdnimg.cn/20200222114459216.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "></p><h2 id="开发软件安装，STM32CubeMX"><a href="#开发软件安装，STM32CubeMX" class="headerlink" title="开发软件安装，STM32CubeMX"></a>开发软件安装，STM32CubeMX</h2><p>STM32CubeMX 是 ST 意法半导体近几年来大力推荐的 STM32 芯片图形化配置工具， 允许用户使用图形化向导生成 C 初始化代码，可以大大减轻开发工作，时间和费用。stm32mp1中使用协处理器M4需要安装stm32cubemx：<br>stm32cubemx运行环境搭建，包含两个部分，首先是安装java运行环境（版本必须为v1.7以上），然后是安装stm32cubemx开发软件。<br>简单使用：<br>新建工程第一步，选择mcu型号<br> <img src="https://img-blog.csdnimg.cn/20200222114600172.png#pic_center" alt="  "><br>由于pangu开发板选用的是stm32mp157AAA3芯片，故选择stm32mp157AAAX<br> <img src="https://img-blog.csdnimg.cn/20200222114620944.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "></p><p>接下来配置时钟源，如果选择使用外部高速时钟（HSE），则需要在System Core中配置RCC；</p><p>如果使用默认内部时钟（HSI），这一步可以略过；这里使用外部时钟，HSE，LSE<br>pangu开发板上的外部时钟<br><img src="https://img-blog.csdnimg.cn/20200222114636918.png" alt="  "><br>下拉框中选择crystal/Ceramic Resonator晶体/陶瓷晶振<br><img src="https://img-blog.csdnimg.cn/20200222114645123.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>设置开发板上D17灯对应的PH6引脚为输出<br> <img src="https://img-blog.csdnimg.cn/20200222114656882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>生成工程设置<br> <img src="https://img-blog.csdnimg.cn/20200222114702610.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br>然后点击Generate code就可生成MDK工程代码。<br>时钟树配置，配置主要是外部晶振大小，分频系数，倍频系统以及选择器。<br> <img src="https://img-blog.csdnimg.cn/20200222114710174.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "><br><img src="https://img-blog.csdnimg.cn/20200222114716478.png#pic_center" alt="  "></p><p>最后用MDK打开生成的MDK-ARM工程文件，build编译。0error。<br><img src="https://img-blog.csdnimg.cn/20200222114746322.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70#pic_center" alt="  "><br>之前使用的STM32F407开发板用的是标准外设库（STD库），  HAL库是硬件抽象层，更加标准化了。所有的函数名和函数体进行了重新定义，重新编写。更加通用。方便移植。近两年新出的STM32芯片，ST只提供HAL库，可用STM32Cube程序生成开发工具+HAL库<br>stm32cube目前几乎支持STM32全系列，我们需要到ST官网下载对应的STM32Cube包<br><img src="https://img-blog.csdnimg.cn/2020022211481192.png" alt="  "><br>包中大致有（1）Drivers文件夹，Drivers 文件夹包含BSP， CMSIS 和 STM32MP1xx_HAL_Driver 三个子文件夹。BSP是板级支持包，提供直接与硬件打交道的API。<br>CMSIS 文件夹是符合 CMSIS 标准的软件抽象层组件相关文件。主要包括 DSP库(DSP_LIB 文件夹)， Cortex-M 内核及其设备文件（Include 文件夹）， 微控制器专用头文件/启动代码/专用系统文件等(Device 文件夹)。<br>STM32MP1xx_HAL_Driver文件夹中包含所有的 STM32MP1xx系列 HAL 库头文件和源文件，也就是所有底层硬件抽象层 API 声明和定义。 它的作用是屏蔽了复杂的硬件寄存器操作，统一了外设的接口函数。 该文件夹包含 Src 和 Inc 两个子文件夹，其中 Src 子文件夹存放的是.c 源文件， Inc 子文件夹存放的是与之对应的.h 头文件。每个.c 源文件对应一个.h 头文件。<br>Middlewares文件夹下有Third_Party文件夹（是第三方中间件）里面有FreeRTOS实时系统支持包和OpenAMP（？）<br>Projects文件夹存放的是一些可以直接编译的实例工程，每个文件夹对应一个ST官方的Demo板，暂时只有SW4STM32的工程，没有MDK的。</p><p>  一般来说，stm32mp1处理器可以在M4上做电机控制，A7上做人机交互界面。</p><h2 id="应用开发环境搭建"><a href="#应用开发环境搭建" class="headerlink" title="应用开发环境搭建"></a>应用开发环境搭建</h2><p><em>linux开发需要在ubuntu下进行，主要是交叉编译器的安装。</em></p><blockquote><p>linux进行C语言开发用的是GCC编译器进行代码编译，但ubuntu自带的GCC编译器是针对X86架构的。我们现在要编译的是ARM架构的代码，需要一个在X86架构的PC机上运行，可以编译ARM架构代码的GCC编译器，这个编译器就叫做交叉编译器。（就是在一个架构上编译另外一个架构的代码）</p></blockquote><p>pangu开发板的开发环境基于Ubuntu16.04 64bit，在虚拟机上安装ubuntu16.04操作系统</p><ul><li>PanGu开发板的应用开发，需要先安装应用开发工具包(SDK)。PanGu开发板提供了两种SDK工具包：i2som-image-qt-openstlinux-eglfs-pangu-x86_64-toolchain-2.6-snapshot.sh和i2som-image-weston-openstlinux-weston-pangu-x86_64-toolchain-2.6-snapshot.sh。</li></ul><p>由于板载的flash预装的是weston系统，在此我选择在ubuntu系统中安装weston系统镜像的应用开发工具链。<br>下面开始安装i2som-image-weston-openstlinux-weston-pangu-x86_64-toolchain-2.6-snapshot.sh工具包</p><ul><li><p>首先运行chmod a+x命令，给所有人加上可执行权限，用ls –lh命令查询文件的大小、权限等详细信息，权限都为rwx（读取、写入、执行）<br><img src="https://img-blog.csdnimg.cn/20200222115039272.png" alt="  "></p></li><li><p>接着在路径下运行安装命令：./i2som-image-weston-openstlinux-weston-pangu-x86_64-toolchain-2.6-snapshot.sh<br><img src="https://img-blog.csdnimg.cn/20200222115050732.png" alt="  "></p></li><li><p>安装路径输入 /opt/st/pangu-i2som-image-weston/2.6-snapshot<br><img src="https://img-blog.csdnimg.cn/20200222115058493.png" alt="  "></p></li><li><p>接着会让你输入管理员密码，之后就等待安装了。<br>当出现SDK has been successfully时证明安装完成了。</p></li><li><p>然后运行如下命令：<br>==. /opt/st/pangu-i2som-image-weston/2.6-snapshot/environment-setup-cortexa7t2hf-neon-vfpv4-openstlinux_weston-linux-gnueabi==<br><img src="https://img-blog.csdnimg.cn/20200222115117851.png" alt="  "></p></li><li><p>通过$CC –version验证开发工具是否正确安装，如图显示了版本信息表示工具链安装完成。</p></li></ul><p>编写测试文件test.c内容如下<br> <img src="https://img-blog.csdnimg.cn/20200222115130646.png" alt="  "><br>编译test应用<br> <img src="https://img-blog.csdnimg.cn/2020022211513545.png" alt="  "><br>然后将输出的 复制到pangu开发板后直接运行</p><p>通过MobaXtern配置ssh登录pangu开发板，可通过sftp服务进行文件的复制拷贝。<br><img src="https://img-blog.csdnimg.cn/2020022211514457.png#pic_center" alt="  "> 上图是pangu开发板的home目录<br>现在将编译输出的test从虚拟机的ubuntu系统复制到home目录下<br><img src="https://img-blog.csdnimg.cn/20200222115156304.png" alt="  "><br> 可以看到此时多了个test文件。<br> <img src="https://img-blog.csdnimg.cn/20200222115206362.png" alt="  "><br>直接运行发现permission denied<br>通过chmod a+x命令修改下权限，紧接着再输入./test<br>输出是hello，I am wangrongyao!</p><blockquote><p>pangu开发板的Micro usb接口可以作为从设备，默认是作为usb以太网设备，可以实现将开发板的usb otg接口作为从设备模式，模拟成为一个网口，通过PC的usb接口连接到开发板。使用Micro USB线连接开发板J5和PC USB Host接口。PanGu开发板上usb0为网络设备，默认IP地址为192.168.7.2<br><img src="https://img-blog.csdnimg.cn/20200222115720532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70" alt="  "></p></blockquote><p>PC通过usb连接开发板后，PC上会出现一个usb虚拟的网络设备，自行手动配置ip地址为192.168.7.10，之后就可以通过ssh登录pangu开发板了。<br><img src="https://img-blog.csdnimg.cn/20200222115727727.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzM2NDE1MzYy,size_16,color_FFFFFF,t_70#pic_center" alt="  "></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> 嵌入式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TCP Congestion性能测试分析</title>
      <link href="/posts/ab61.html"/>
      <url>/posts/ab61.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-实验简介"><a href="#1-实验简介" class="headerlink" title="1.实验简介"></a>1.实验简介</h2><p>  最近在学习《现代计算机网络》，课程布置了一个对tcp拥塞控制性能进行测试的实验，本篇博客就本次实验做一个完整的实验报告及总结。</p><a id="more"></a><h2 id="一-实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）"><a href="#一-实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）" class="headerlink" title="一.实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）"></a>一.实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）</h2><ul><li>操作系统：Windows10</li><li>虚拟机操作系统：SEEDUbuntu 12.04</li><li>虚拟机工具：VirtualBox 5.2.16</li><li>网络虚拟软件：GNS3 2.0.3</li><li>网络性能测试工具：iperf</li></ul><h2 id="二-实验目的"><a href="#二-实验目的" class="headerlink" title="二.实验目的"></a>二.实验目的</h2><ol><li>掌握基础ip网络配置；</li><li>选择 TCP 的三种支持的三种拥塞控制算法 cubic、reno、westwood，通过改变 Seed-Router 的延迟和丢包，来测试三种 TCP 拥塞控制算法在不同情况下（延迟、丢包）的性能。</li><li>深入理解不同TCP拥塞控制算法思路及原理。</li></ol><h2 id="三-实验步骤"><a href="#三-实验步骤" class="headerlink" title="三.实验步骤"></a>三.实验步骤</h2><p>　　本次实验中主要实现SeedUbuntu内核中Cubic、Reno、Westwood三种TCP拥塞控制算法的性能测试分析与比较。实验中采用三台虚拟机SEED-Client、SEED-Router、SEED-Server构建处于两个不同子网网段的可相互通信网络拓扑结构，其中保证SEED-Client和SEED-Serve采用同一TCP拥塞控制算法，通过设置SEED-Router的转发参数（丢包率、延迟、重复包率、损坏包率）模拟不同的网络状态。</p><p>1.导入SEED虚拟机镜像文件，命名为SEED-Client，再复制两个，命名为SEED-Router、SEED-Server（注意勾选重新初始化网卡的MAC地址）。</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213193756.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195510.png" alt=""></p><p>2.在GNS3中新建一个项目，将三台虚拟机按如图方式连接起来</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195551.png" alt=""></p><p>3.然后在GNS3中给每台虚拟机配置三个网卡，eth0、eth1、eth2，其中eth0不要作为连接使用，而是将其配置为网络地址转换NAT，用于虚拟机访问外部网络。</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195600.png" alt=""></p><p>4.按照下表配置三台主机的ip地址和路由</p><table><thead><tr><th></th><th>SEED-Client</th><th>SEED-Router</th><th>SEED-Server</th></tr></thead><tbody><tr><td>eth0</td><td>/</td><td>/</td><td>/</td></tr><tr><td>eth1</td><td>192.168.1.2/24</td><td>192.168.1.1/24</td><td>192.168.2.2/24</td></tr><tr><td>eth2</td><td>/</td><td>192.168.2.1/24</td><td>/</td></tr></tbody></table><p>5.在SEED-Client端增加默认路由</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195608.png" alt=""></p><p>用ip route命令查看</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195634.png" alt=""></p><p>Ping <a href="http://www.baidu.com测试能否通过eth0联网" target="_blank" rel="noopener">www.baidu.com测试能否通过eth0联网</a></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195701.png" alt=""></p><p>6.在SEED-Router端启动路由转发功能</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195713.png" alt=""></p><p>7.在SEED-Server增加默认路由</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200213195742.png" alt=""></p><p>用ip route命令查看</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214142955.png" alt=""></p><p>测试能否联网，访问外部网络。</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143027.png" alt=""></p><p>　　经过上述一系列操作步骤，实现SEED-Client与SEED-Server之间能够相互ping通，并且保证三台虚拟机可以通过eth0网卡访问外部网络。</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143110.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143120.png" alt=""></p><p>8.然后分别在SEED-Client和SEED-Server上通过sudo apt-get install iperf命令安装iperf软件</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143223.png" alt=""></p><p>现在实验所需的环境配置完成。</p><h2 id="linux下的拥塞控制算法"><a href="#linux下的拥塞控制算法" class="headerlink" title="linux下的拥塞控制算法"></a>linux下的拥塞控制算法</h2><p>(1)观察Linux内核内已经编译的TCP拥塞控制算法:使用命令行sysctl net.ipv4.tcp_available_congestion_control,可以看到已经直接编译到内核的拥塞控制算法Cubic及Reno</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143339.png" alt=""></p><p>修改当前的拥塞控制算法</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143442.png" alt=""></p><p>使用命令ls  /lib/modules/3.5.0-37-generic/kernel/net/ipv4/ 查看Linux支持的拥塞控制算法：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143604.png" alt=""></p><p>从SEED-Client虚拟机发包测试</p><p>下面以SEED-Client和SEED-Server都设置拥塞算法为cubic</p><p>先在SEED-Server端运行iperf -c命令，让iperf的服务器端运行守护在5001端口：</p><p>​    在SEED-Client端运行下表的命令，让iperf的客户端运行，同时利用Linux内核的tcp probe模块监控特定连接中参数变化：</p><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>modprobe tcp_probe   port=5001</td><td>对端口为5001（源或目的）的tcp连接进行监控</td></tr><tr><td>cat /proc/net/tcpprobe &gt; data.txt   &amp;</td><td>tcpprobe捕捉的信息是持续性的，可以放到后台读</td></tr><tr><td>pid=$!</td><td>保存上一个读命令的pid，用于结束读tcpprobe接口</td></tr><tr><td>iperf -c otherhost –t time</td><td>使用iperf建立一个tcp流</td></tr><tr><td>kill $pid</td><td>杀死进程</td></tr></tbody></table><p>　　修改不同的拥塞控制算法，重复执行上述命令，得到XXX.txt文件保存了TCP的拥塞窗口的变化情况，作为实验数据，方便后续的分析。</p><p>　　下面依次得到cubic、reno和westwood算法在正常情况、不同延迟时间、不同丢包率情况下的测试结果。</p><h3 id="1-CUBIC算法"><a href="#1-CUBIC算法" class="headerlink" title="1.CUBIC算法"></a>1.CUBIC算法</h3><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143920.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143932.png" alt=""></p><p>设置cubic算法的loss为2.5%</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143943.png" alt=""></p><p>设置cubic算法的loss为0.5%</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214143957.png" alt=""></p><p>设置cubic算法的延迟为30ms加减10ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214144047.png" alt=""></p><p>设置延迟为100ms加减30ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214144057.png" alt=""></p><p>设置延迟为10ms加减3ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214144105.png" alt=""></p><h3 id="2-Reno算法"><a href="#2-Reno算法" class="headerlink" title="2.Reno算法"></a>2.Reno算法</h3><p>正常情况：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214150418.png" alt=""></p><p>设置reno算法的loss为2.5%</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214150439.png" alt=""></p><p>设置reno算法的loss为0.5%</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214150448.png" alt=""></p><p>设置reno算法的延迟为30ms加减10ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214150458.png" alt=""></p><p>设置reno延迟为100ms加减30ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214150529.png" alt=""></p><p>设置reno延迟为10ms加减3ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214150544.png" alt=""></p><h3 id="3-Westwood算法"><a href="#3-Westwood算法" class="headerlink" title="3.Westwood算法"></a>3.Westwood算法</h3><p>Client:</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214152822.png" alt=""></p><p>Server:</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214152840.png" alt=""></p><p>正常情况：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214152902.png" alt=""></p><p>设置westwood算法的loss为2.5%</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214152917.png" alt=""></p><p>设置westwood算法的loss为0.5%</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214152930.png" alt=""></p><p>设置westwood算法的延迟为30ms加减10ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214152941.png" alt=""></p><p>设置westwood延迟为100ms加减30ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214152953.png" alt=""></p><p>设置westwood延迟为10ms加减3ms</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214153008.png" alt=""></p><p>Server：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214153019.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214153032.png" alt=""></p><p>在实验过程中遇到加了delay情况下，生成的.txt文件没有数据，注意此时需要先用modprobe -r命令将tcp_probe模块移除，再重新加载，加载使用额外的参数full=1。</p><p>tcpprobe模块的卸载与加载，modprobe –r tcp_probe </p><p># modprobe tcp_probe full=1 port=5001   // full选项表示每次收到数据包都捕捉信息</p><p>==模拟丢包==</p><p>在 SEED_Route 这台虚拟机连接 SEED_Server 网卡上增加丢包和延迟来改变网络环境。在 SEED_Route 终端中键入命令:</p><p>tc qdisc add dev eth2 root netem loss 2.5%</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214154535.png" alt=""></p><p>模拟丢包</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214154615.png" alt=""></p><p>将add改为del删除相关配置。</p><p>增加延迟：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214154630.png" alt=""></p><p>cwnd拥塞窗口</p><p>重复上述步骤，获得新的数据，命名为data_cubic_delay.txt</p><p>改变拥塞控制算法：</p><p>Client：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214154854.png" alt=""></p><p>Server：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214154906.png" alt=""></p><p>设置丢包和延迟</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214154913.png" alt=""></p><p>运行新的拥塞控制算法：linux支持的拥塞控制算法westwood.ko</p><p>首先加载这些内核模块：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214154930.png" alt=""></p><p>然后在每种拥塞控制算法下重复第获取数据命令，得到三种算法下正常、丢包、延迟共9种情况下的数据进行分析。</p><p>查看已经配置的网络条件：#tc qdisc show dev eth2</p><h3 id="将实验数据文件通过虚拟机共享目录导出"><a href="#将实验数据文件通过虚拟机共享目录导出" class="headerlink" title="将实验数据文件通过虚拟机共享目录导出"></a><strong>将实验数据文件通过虚拟机共享目录导出</strong></h3><p>1、挂载这个目录到linux本地目录</p><p>首先在虚拟机中创建共享文件夹</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214155658.png" alt=""></p><p>改为可读可写</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214155710.png" alt=""></p><p>运行命令加载</p><p>sudo mount -t vboxsf -o uid=1000,gid=1000 share /home/share</p><p>share为VirtualBox共享目录的名字</p><p>/home/share为刚刚创建的目标目录。</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214155723.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214155733.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214155744.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214155808.png" alt=""></p><p>这样就把数据从虚拟机复制到物理机上来了。便于后续的数据分析。</p><h2 id="四-实验结果和分析"><a href="#四-实验结果和分析" class="headerlink" title="四.实验结果和分析"></a>四.实验结果和分析</h2><p>当对资源的需求超过了资源的可用部分，网络中许多资源同时供应不足，网络的性能就要明显变坏，整个网络的吞吐量随之负荷的增大而下降，这便是拥塞。TCP作为一个成熟可靠的通信协议，拥有许多具有较优性能的拥塞控制协议，可做到从全局角度，了解网络能够承受的现有网络负载，防止过多的数据注入网络中，保证网络中的路由器或链路不会过载。</p><p>本次实验主要以Linux内核中TCP拥塞控制算法模块Cubic、Reno、Westwood为例通过测试比较采用不同TCP拥塞控制算法在不同网络状态下的网络的吞吐量等性能，并深入分析Cubic、Reno、Westwood三种TCP拥塞控制算法的基本原理，进一步分析现有TCP拥塞控制算法的优缺点和较佳适用的网络环境。</p><p>实验中测试了Linux内核中的TCP拥塞控制算法中基于丢包反馈协议的Cubic、Reno和基于路径延迟反馈协议的Westwood算法，其中Cubic是针对Reno等传统TCP拥塞控制算法进行改进以适应现今高带宽、传输延时大的网络链路，提高TCP带宽利用率。</p><p>TCP作为面向连接全双工可靠服务协议，实现拥塞控制算法主要包括四个阶段有：慢开始、拥塞避免、快速重传以及快速恢复。</p><p>（1）慢开始：在新加入网络时，主机发送数据不是立即将大量数据字节注入网络，而是由小到大逐渐增大发送窗口。通常在刚刚开始发送报文段时，先把拥塞窗口 cwnd 设置为一个最大报文段MSS的数值，在每收到一个对新的报文段的确认后，把拥塞窗口增加至多一个MSS的数值，这样，每经过一个传输轮次RTT，拥塞窗口 cwnd 就加倍，即拥塞控制窗口呈指数增长。为了防止拥塞窗口cwnd增长过大引起网络拥塞，还需要设置一个慢开始门限ssthresh状态变量。 当 cwnd &lt; ssthresh 时，使用上述的慢开始算法。 当 cwnd &gt; ssthresh 时，停止使用慢开始算法而改用拥塞避免算法。当 cwnd = ssthresh 时，既可使用慢开始算法，也可使用拥塞控制避免算法。</p><p>（2）拥塞避免：当发送窗口达到慢开始阈值ssthresh时，为避免拥塞窗口增长过快导致网络拥塞，现采用拥塞控制算法，使发送窗口线性缓慢增加，即每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1。</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214163055.png" alt=""></p><p>　　　　　　　　　图4.1 采用慢开始及拥塞避免策略</p><p>无论在慢开始阶段还是在拥塞避免阶段，只要发送方判断网络出现拥塞（其根据就是没有收到确认ACK），就要把慢开始门限ssthresh设置为出现拥塞时的发送方窗口值的一半（但不能小于2），然后把拥塞窗口cwnd重新设置为1，执行慢开始算法。这样做的目的就是要迅速减少主机发送到网络中的分组数，使得发生拥塞的路由器有足够时间把队列中积压的分组处理完毕。</p><p>慢开始和拥塞控制算法常常作为一个整体使用，而快速重传和快速恢复则是为了减少因为拥塞导致的数据包丢失带来的重传时间，从而避免传递没有用的数据包到网络。</p><p>(3)快速重传：快重传机制要求接收方每收到一个失序的TCP报文段后就立即发出重复确认(为了使发送方及早知道没有到达对方)而不要等待自己发送数据时才进行确认，发送方只要连续收到3个重复确认就应当立即重传未被确认的报文段。</p><p>(4)快速恢复：当发送方连续收到三个重复确认时，就执行“乘法减小”算法，把ssthresh门限减半。但是接下去并不执行慢开始算法，而是认定网络现在可能没有出现拥塞，不执行慢开始算法，而是执行拥塞避免算法。</p><p>根据得到的数据进行绘图：</p><p><strong>采用Cubic算法实验结果图：</strong></p><p>正常情况下：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214163241.png" alt=""></p><p>丢包率为2.5%的情况： </p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214163250.png" alt=""></p><p>丢包率为0.5%:</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214164119.png" alt=""></p><p>设置延迟为30ms±10ms：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214164129.png" alt=""></p><p>设置延迟为100ms±30ms：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214164141.png" alt=""></p><p>设置延迟为10ms±3ms：  </p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214164219.png" alt=""></p><p><strong>采用Reno算法实验结果图：</strong></p><p>正常情况下：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214164431.png" alt=""></p><p>丢包率为2.5%的情况：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214164445.png" alt=""></p><p>丢包率为0.5%:</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165104.png" alt=""></p><p>设置延迟为30ms±10ms：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165116.png" alt=""></p><p>设置延迟为100ms±30ms：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165129.png" alt=""></p><p>设置延迟为10ms±3ms：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165137.png" alt=""></p><p><strong>采用Westwood算法实验结果图：</strong></p><p>正常情况下：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165419.png" alt=""></p><p>丢包率为2.5%的情况：   </p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165443.png" alt=""></p><p>丢包率为0.5%:</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165451.png" alt=""></p><p>设置延迟为30ms±10ms：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165459.png" alt=""></p><p>设置延迟为100ms±30ms：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165517.png" alt=""></p><p>设置延迟为10ms±3ms：  </p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165524.png" alt=""></p><p>对上述绘制的图像作如下分析：</p><p>　　通过对比正常情况下的Cubic和Reno图，可以发现cubic在稳定状态下的拥塞窗口cwnd的总体增长趋势更平缓。在发送端检测到链路中出现丢包时，cubic和reno都会立刻减小cwnd以缓解拥塞现象，之后cwnd开始进入恢复阶段。通过对比可以明显观察到cubic相比于reno，拥塞窗口增长的更为平缓，而reno的拥塞窗口呈现指数趋势增长。在丢包率为0.5%时，reno算法的吞吐量和cubic算法相比有着一定的优势，而当丢包率为2.5%时，cubic比reno此时有更高的带宽利用率。</p><p>　　通过对比正常情况下的reno和westwood图，可以看出慢启动阶段westwood的拥塞窗口增加的较为迅速，而在拥塞避免阶段其增长趋势有所放缓。在高丢包率链路中由于频繁的丢包reno需要降低自己的发送端cwnd，不断将当前的cwnd置为一般，而且对比发现高延时环境下reno的拥塞窗口增长比低延时来的慢一些。</p><p>　　对上述三种拥塞控制算法进行性能分析，主要关注性能指标是发送端的cwnd，ssthresh以及整个连接过程中的吞吐量。下表是不同丢包率和延时时间下的吞吐率：</p><table><thead><tr><th>拥塞控制算法</th><th>正常情况   （Mbit/s）</th><th>loss   为0.5%</th><th>loss   为2.5%</th><th>delay为   30ms±10ms</th><th>delay为   100ms±30ms</th><th>delay为   10ms±3ms</th></tr></thead><tbody><tr><td>cubic</td><td>31.7</td><td>20.9</td><td>14.6</td><td>15.5</td><td>12.3</td><td>23</td></tr><tr><td>reno</td><td>41</td><td>21.5</td><td>13.9</td><td>17.1</td><td>7.99</td><td>21.4</td></tr><tr><td>westwood</td><td>39.1</td><td>22.3</td><td>16.8</td><td>16.9</td><td>3.98</td><td>21.6</td></tr></tbody></table><p>绘制如图所示柱状图：</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165656.png" alt=""></p><p>　　分析上图可知，当网络存在随机丢包时，采用Westwood基于时延反馈的拥塞控制机制效果最佳，采用适用于高带宽的基于丢包反馈的Cubic拥塞控制机制和采用Reno拥塞控制算法的效果较差，这是由于存在丢包后，Cubic算法和Reno算法受丢包事件驱动，采用拥塞控制，使得发送窗口乘性回退，最终反映为网络的吞吐量的下降，而Westwood则是通过测量估计可用带宽动态调整慢开始阈值，可实现更快的快速恢复。</p><p><img src="https://cdn.jsdelivr.net/gh/honor-ry/honor-imgs/images/20200214165707.png" alt=""></p><p>　　分析上图：当网络存在7-13ms的随机延迟时，cubic算法表现出最佳的吞吐率。Cubic算法的有点在于只要没有出现丢包，就不会主动降低自己的发送速度，可以最大程度的利用网络剩余带宽，提高吞吐量。可以在在高带宽、低丢包率的网络中可以发挥较好的性能。而Westwood由于检测到了连接超时，会认为网络拥塞，发送窗口乘性减少回退，大大降低了网络利用率，但由于其可实现更快的快恢复阶段，因此性能相比于Reno要好一点。</p><p>　　综合上述分析，对cubic、reno、westwood三种拥塞控制算法有了较深的了解。其中Cubic、Reno算法是基于丢包反馈协议的（将丢包视为出现拥塞，采取缓慢探测的方式，逐渐增大拥塞窗口，当出现丢包时，将拥塞窗口减小），Westwood算法是基于延迟反馈协议的（将时延增加视为出现拥塞，延时增加时增大拥塞窗口，延时减小时减小拥塞窗口）。</p><p>　　Cubic算法适用于高带宽，低丢包率的网络，能够有效利用带宽。</p><p>　　Reno算法适用于低延时，低带宽的网络。</p><p>　　Westwood算法是在tcp-reno算法的基础上针对高带宽大延时提出的，尤其在无线网络中相较reno有更快的恢复速度，对可用带宽的利用率很高。通过测量估算出网络的可用带宽，对拥塞窗口cwnd进行适当调整，实现更快速的恢复。与Reno相比吞吐量成倍提高。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown测试</title>
      <link href="/posts/ff42.html"/>
      <url>/posts/ff42.html</url>
      
        <content type="html"><![CDATA[<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><hr><h3 id="1-斜体和粗体"><a href="#1-斜体和粗体" class="headerlink" title="1. 斜体和粗体"></a>1. 斜体和粗体</h3><p>使用 * 和 ** 表示斜体和粗体。</p><p>示例：</p><p>这是 <em>斜体</em>，这是 <strong>粗体</strong>。</p><a id="more"></a><h3 id="2-分级标题"><a href="#2-分级标题" class="headerlink" title="2. 分级标题"></a>2. 分级标题</h3><p>使用 === 表示一级标题，使用 — 表示二级标题。</p><p>示例：</p><pre><code>这是一个一级标题============================这是一个二级标题--------------------------------------------------### 这是一个三级标题</code></pre><p>你也可以选择在行首加井号表示不同级别的标题 (H1-H6)，例如：# H1, ## H2, ### H3，#### H4。</p><h3 id="3-外链接"><a href="#3-外链接" class="headerlink" title="3. 外链接"></a>3. 外链接</h3><p>使用 [描述](链接地址) 为文字增加外链接。</p><p>示例：</p><p>这是去往 <a href="http://Shen-Yu.github.com" target="_blank" rel="noopener">本人博客</a> 的链接。</p><p><img src="https://n1-q.mafengwo.net/s15/M00/65/BB/CoUBGV3brtOAMKOdAAsHBZ8nyQk791.jpg?imageMogr2%2Fthumbnail%2F1360x%2Fstrip%2Fquality%2F90" alt=""></p><h3 id="4-无序列表"><a href="#4-无序列表" class="headerlink" title="4. 无序列表"></a>4. 无序列表</h3><p>使用 *，+，- 表示无序列表。</p><p>示例：</p><ul><li>无序列表项 一</li><li>无序列表项 二</li><li>无序列表项 三</li></ul><h3 id="5-有序列表"><a href="#5-有序列表" class="headerlink" title="5. 有序列表"></a>5. 有序列表</h3><p>使用数字和点表示有序列表。</p><p>示例：</p><ol><li>有序列表项 一</li><li>有序列表项 二</li><li>有序列表项 三</li></ol><h3 id="6-文字引用"><a href="#6-文字引用" class="headerlink" title="6. 文字引用"></a>6. 文字引用</h3><p>使用 &gt; 表示文字引用。</p><p>示例：</p><blockquote><p>野火烧不尽，春风吹又生。</p></blockquote><h3 id="7-行内代码块"><a href="#7-行内代码块" class="headerlink" title="7. 行内代码块"></a>7. 行内代码块</h3><p>使用 `代码` 表示行内代码块。</p><p>示例：</p><p>让我们聊聊 <code>html</code>。</p><h3 id="8-代码块"><a href="#8-代码块" class="headerlink" title="8.  代码块"></a>8.  代码块</h3><p>使用 四个缩进空格 表示代码块。</p><p>示例：</p><pre><code>这是一个代码块，此行左侧有四个不可见的空格。</code></pre><h3 id="9-插入图像"><a href="#9-插入图像" class="headerlink" title="9.  插入图像"></a>9.  插入图像</h3><p>使用 ![描述](图片链接地址) 插入图像。</p><p>示例：</p><p><img src="https://www.zybuluo.com/static/img/my_head.jpg" alt="我的头像"></p><h1 id="Cmd-Markdown-高阶语法手册"><a href="#Cmd-Markdown-高阶语法手册" class="headerlink" title="Cmd Markdown 高阶语法手册"></a>Cmd Markdown 高阶语法手册</h1><h3 id="1-内容目录"><a href="#1-内容目录" class="headerlink" title="1. 内容目录"></a>1. 内容目录</h3><p>在段落中填写 <code>[TOC]</code> 以显示全文内容的目录结构。</p><p>[TOC]</p><h3 id="2-标签分类"><a href="#2-标签分类" class="headerlink" title="2. 标签分类"></a>2. 标签分类</h3><p>在编辑区任意行的列首位置输入以下代码给文稿标签：</p><p>标签： 数学 英语 Markdown</p><p>或者</p><p>Tags： 数学 英语 Markdown</p><h3 id="3-删除线"><a href="#3-删除线" class="headerlink" title="3. 删除线"></a>3. 删除线</h3><p>使用 ~~ 表示删除线。</p><p><del>这是一段错误的文本。</del></p><h3 id="4-注脚"><a href="#4-注脚" class="headerlink" title="4. 注脚"></a>4. 注脚</h3><p>使用 [^keyword] 表示注脚。</p><p>这是一个注脚[^footnote]的样例。</p><p>这是第二个注脚[^footnote2]的样例。</p><h3 id="5-LaTeX-公式"><a href="#5-LaTeX-公式" class="headerlink" title="5. LaTeX 公式"></a>5. LaTeX 公式</h3><p>$ 表示行内公式： </p><p>质能守恒方程可以用一个很简洁的方程式 $E=mc^2$ 来表达。</p><p>$$ 表示整行公式：</p><p>$$\sum_{i=1}^n a_i=0$$</p><p>$$f(x_1,x_x,\ldots,x_n) = x_1^2 + x_2^2 + \cdots + x_n^2 $$</p><p>$$\sum^{j-1}<em>{k=0}{\widehat{\gamma}</em>{kj} z_k}$$</p><p>访问 <a href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" target="_blank" rel="noopener">MathJax</a> 参考更多使用方法。</p><h3 id="6-加强的代码块"><a href="#6-加强的代码块" class="headerlink" title="6. 加强的代码块"></a>6. 加强的代码块</h3><p>支持四十一种编程语言的语法高亮的显示，行号显示。</p><p>非代码示例：</p><pre><code>$ sudo apt-get install vim-gnome</code></pre><p>Python 示例：</p><pre class=" language-python"><code class="language-python">@requires_authorization<span class="token keyword">def</span> <span class="token function">somefunc</span><span class="token punctuation">(</span>param1<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> param2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''A docstring'''</span>    <span class="token keyword">if</span> param1 <span class="token operator">></span> param2<span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># interesting</span>        <span class="token keyword">print</span> <span class="token string">'Greater'</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>param2 <span class="token operator">-</span> param1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">or</span> None<span class="token keyword">class</span> <span class="token class-name">SomeClass</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span class="token operator">>></span><span class="token operator">></span> message <span class="token operator">=</span> <span class="token triple-quoted-string string">'''interpreter... prompt'''</span></code></pre><p>JavaScript 示例：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/*** nth element in the fibonacci series.* @param n >= 0* @return the nth element, >= 0.*/</span><span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> tmp<span class="token punctuation">;</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">--</span>n <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    tmp <span class="token operator">=</span> a<span class="token punctuation">;</span>    a <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">;</span>    b <span class="token operator">=</span> tmp<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="7-流程图"><a href="#7-流程图" class="headerlink" title="7. 流程图"></a>7. 流程图</h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><pre class=" language-flow"><code class="language-flow">st=>start: Start:>https://www.zybuluo.comio=>inputoutput: verificationop=>operation: Your Operationcond=>condition: Yes or No?sub=>subroutine: Your Subroutinee=>endst->io->op->condcond(yes)->econd(no)->sub->io</code></pre><h4 id="更多语法参考：流程图语法参考"><a href="#更多语法参考：流程图语法参考" class="headerlink" title="更多语法参考：流程图语法参考"></a>更多语法参考：<a href="http://adrai.github.io/flowchart.js/" target="_blank" rel="noopener">流程图语法参考</a></h4><h3 id="8-序列图"><a href="#8-序列图" class="headerlink" title="8. 序列图"></a>8. 序列图</h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><pre class=" language-seq"><code class="language-seq">Alice->Bob: Hello Bob, how are you?Note right of Bob: Bob thinksBob-->Alice: I am good thanks!</code></pre><h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例 2"></a>示例 2</h4><pre class=" language-seq"><code class="language-seq">Title: Here is a titleA->B: Normal lineB-->C: Dashed lineC->>D: Open arrowD-->>A: Dashed open arrow</code></pre><h4 id="更多语法参考：序列图语法参考"><a href="#更多语法参考：序列图语法参考" class="headerlink" title="更多语法参考：序列图语法参考"></a>更多语法参考：<a href="http://bramp.github.io/js-sequence-diagrams/" target="_blank" rel="noopener">序列图语法参考</a></h4><h3 id="9-甘特图"><a href="#9-甘特图" class="headerlink" title="9. 甘特图"></a>9. 甘特图</h3><p>甘特图内在思想简单。基本是一条线条图，横轴表示时间，纵轴表示活动（项目），线条表示在整个期间上计划和实际的活动完成情况。它直观地表明任务计划在什么时候进行，及实际进展与计划要求的对比。</p><pre class=" language-gantt"><code class="language-gantt">    title 项目开发流程    section 项目确定        需求分析       :a1, 2016-06-22, 3d        可行性报告     :after a1, 5d        概念验证       : 5d    section 项目实施        概要设计      :2016-07-05  , 5d        详细设计      :2016-07-08, 10d        编码          :2016-07-15, 10d        测试          :2016-07-22, 5d    section 发布验收        发布: 2d        验收: 3d</code></pre><h4 id="更多语法参考：甘特图语法参考"><a href="#更多语法参考：甘特图语法参考" class="headerlink" title="更多语法参考：甘特图语法参考"></a>更多语法参考：<a href="https://knsv.github.io/mermaid/#gant-diagrams" target="_blank" rel="noopener">甘特图语法参考</a></h4><h3 id="10-Mermaid-流程图"><a href="#10-Mermaid-流程图" class="headerlink" title="10. Mermaid 流程图"></a>10. Mermaid 流程图</h3><pre class=" language-graphLR"><code class="language-graphLR">    A[Hard edge] -->|Link text| B(Round edge)    B --> C{Decision}    C -->|One| D[Result one]    C -->|Two| E[Result two]</code></pre><h4 id="更多语法参考：Mermaid-流程图语法参考"><a href="#更多语法参考：Mermaid-流程图语法参考" class="headerlink" title="更多语法参考：Mermaid 流程图语法参考"></a>更多语法参考：<a href="https://knsv.github.io/mermaid/#flowcharts-basic-syntax" target="_blank" rel="noopener">Mermaid 流程图语法参考</a></h4><h3 id="11-Mermaid-序列图"><a href="#11-Mermaid-序列图" class="headerlink" title="11. Mermaid 序列图"></a>11. Mermaid 序列图</h3><pre class=" language-sequence"><code class="language-sequence">    Alice->John: Hello John, how are you?    loop every minute        John-->Alice: Great!    end</code></pre><h4 id="更多语法参考：Mermaid-序列图语法参考"><a href="#更多语法参考：Mermaid-序列图语法参考" class="headerlink" title="更多语法参考：Mermaid 序列图语法参考"></a>更多语法参考：<a href="https://knsv.github.io/mermaid/#sequence-diagrams" target="_blank" rel="noopener">Mermaid 序列图语法参考</a></h4><h3 id="12-表格支持"><a href="#12-表格支持" class="headerlink" title="12. 表格支持"></a>12. 表格支持</h3><table><thead><tr><th>项目</th><th align="right">价格</th><th align="center">数量</th></tr></thead><tbody><tr><td>计算机</td><td align="right">$1600</td><td align="center">5</td></tr><tr><td>手机</td><td align="right">$12</td><td align="center">12</td></tr><tr><td>管线</td><td align="right">$1</td><td align="center">234</td></tr></tbody></table><h3 id="13-定义型列表"><a href="#13-定义型列表" class="headerlink" title="13. 定义型列表"></a>13. 定义型列表</h3><dl><dt>名词 1</dt><dd>定义 1（左侧有一个可见的冒号和四个不可见的空格）</dd></dl><dl><dt>代码块 2</dt><dd>这是代码块的定义（左侧有一个可见的冒号和四个不可见的空格）</dd></dl><pre><code>    代码块（左侧有八个不可见的空格）</code></pre><h3 id="14-Html-标签"><a href="#14-Html-标签" class="headerlink" title="14. Html 标签"></a>14. Html 标签</h3><p>本站支持在 Markdown 语法中嵌套 Html 标签，譬如，你可以用 Html 写一个纵跨两行的表格：</p><pre><code>&lt;table&gt;    &lt;tr&gt;        &lt;th rowspan="2"&gt;值班人员&lt;/th&gt;        &lt;th&gt;星期一&lt;/th&gt;        &lt;th&gt;星期二&lt;/th&gt;        &lt;th&gt;星期三&lt;/th&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;李强&lt;/td&gt;        &lt;td&gt;张明&lt;/td&gt;        &lt;td&gt;王平&lt;/td&gt;    &lt;/tr&gt;&lt;/table&gt;</code></pre><table>    <tbody><tr>        <th rowspan="2">值班人员</th>        <th>星期一</th>        <th>星期二</th>        <th>星期三</th>    </tr>    <tr>        <td>李强</td>        <td>张明</td>        <td>王平</td>    </tr></tbody></table><h3 id="15-内嵌图标"><a href="#15-内嵌图标" class="headerlink" title="15. 内嵌图标"></a>15. 内嵌图标</h3><p>本站的图标系统对外开放，在文档中输入</p><pre><code>&lt;i class="icon-weibo"&gt;&lt;/i&gt;</code></pre><p>即显示微博的图标： <i class="icon-weibo icon-2x"></i></p><p>替换 上述 <code>i 标签</code> 内的 <code>icon-weibo</code> 以显示不同的图标，例如：</p><pre><code>&lt;i class="icon-renren"&gt;&lt;/i&gt;</code></pre><p>即显示人人的图标： <i class="icon-renren icon-2x"></i></p><p>更多的图标和玩法可以参看 <a href="http://fortawesome.github.io/Font-Awesome/3.2.1/icons/" target="_blank" rel="noopener">font-awesome</a> 官方网站。</p><h3 id="16-待办事宜-Todo-列表"><a href="#16-待办事宜-Todo-列表" class="headerlink" title="16. 待办事宜 Todo 列表"></a>16. 待办事宜 Todo 列表</h3><p>使用带有 [ ] 或 [x] （未完成或已完成）项的列表语法撰写一个待办事宜列表，并且支持子列表嵌套以及混用Markdown语法，例如：</p><pre><code>- [ ] **Cmd Markdown 开发**    - [ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率    - [ ] 支持以 PDF 格式导出文稿    - [x] 新增Todo列表功能 [语法参考](https://github.com/blog/1375-task-lists-in-gfm-issues-pulls-comments)    - [x] 改进 LaTex 功能        - [x] 修复 LaTex 公式渲染问题        - [x] 新增 LaTex 公式编号功能 [语法参考](http://docs.mathjax.org/en/latest/tex.html#tex-eq-numbers)- [ ] **七月旅行准备**    - [ ] 准备邮轮上需要携带的物品    - [ ] 浏览日本免税店的物品    - [x] 购买蓝宝石公主号七月一日的船票</code></pre><p>对应显示如下待办事宜 Todo 列表：</p><ul><li><input disabled="" type="checkbox"> <strong>Cmd Markdown 开发</strong><ul><li><input disabled="" type="checkbox"> 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li><li><input disabled="" type="checkbox"> 支持以 PDF 格式导出文稿</li><li><input checked="" disabled="" type="checkbox"> 新增Todo列表功能 <a href="https://github.com/blog/1375-task-lists-in-gfm-issues-pulls-comments" target="_blank" rel="noopener">语法参考</a></li><li><input checked="" disabled="" type="checkbox"> 改进 LaTex 功能<ul><li><input checked="" disabled="" type="checkbox"> 修复 LaTex 公式渲染问题</li><li><input checked="" disabled="" type="checkbox"> 新增 LaTex 公式编号功能 <a href="http://docs.mathjax.org/en/latest/tex.html#tex-eq-numbers" target="_blank" rel="noopener">语法参考</a></li></ul></li></ul></li><li><input disabled="" type="checkbox"> <strong>七月旅行准备</strong><ul><li><input disabled="" type="checkbox"> 准备邮轮上需要携带的物品</li><li><input disabled="" type="checkbox"> 浏览日本免税店的物品</li><li><input checked="" disabled="" type="checkbox"> 购买蓝宝石公主号七月一日的船票</li></ul></li></ul><p>[^footnote]: 这是一个 <em>注脚</em> 的 <strong>文本</strong>。</p><p>[^footnote2]: 这是另一个 <em>注脚</em> 的 <strong>文本</strong>。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SYN flood攻击及SYN cookie原理分析</title>
      <link href="/posts/77c3.html"/>
      <url>/posts/77c3.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-实验简介"><a href="#1-实验简介" class="headerlink" title="1.实验简介"></a>1.实验简介</h2><p>　　最近在学习《计算机网络》，课程布置了一个网络攻击的作业 SYN Flooding Attack ，本篇博客就本次实验做一个完整的实验报告及总结。</p><h2 id="所用平台seed简介"><a href="#所用平台seed简介" class="headerlink" title="所用平台seed简介"></a>所用平台seed简介</h2><ol><li>SEED：计算机安全教育的教学实验平台</li><li><a href="http://www.cis.syr.edu/~wedu/seed/" target="_blank" rel="noopener">http://www.cis.syr.edu/~wedu/seed/</a></li><li>纽约雪城大学 杜文亮 (Du, Wenliang)教授设计和实现，从2002年开始得到NSF 1.2M$的资助</li></ol><a id="more"></a><h2 id="一-实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）"><a href="#一-实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）" class="headerlink" title="一.实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）"></a>一.实验环境（详细说明实验运行的操作系统，网络平台，机器的配置）</h2><p>操作系统：Windows10<br>虚拟机操作系统：SEEDUbuntu 12.04<br>虚拟机工具：VirtualBox 5.2.16<br>网络虚拟软件：GNS3 2.0.3</p><h2 id="二-实验目的"><a href="#二-实验目的" class="headerlink" title="二.实验目的"></a>二.实验目的</h2><ol><li>掌握基础ip网络配置；</li><li>掌握GNS3和使用WireShark对流量进行抓包分析；</li><li>实现SYN flood攻击，理解其表现形式和产生的影响；</li><li>深入观察理解linux内核tcp SYN cookie机制，理解其在SYN flood攻击中的作用。</li></ol><h2 id="三-实验步骤"><a href="#三-实验步骤" class="headerlink" title="三.实验步骤"></a>三.实验步骤</h2><ol><li>导入SEED虚拟机镜像文件，命名为SEED ubuntu，复制一个，命名为SEED ubuntu target（注意勾选重新初始化网卡的MAC地址）。<br><img src="https://i.loli.net/2020/02/10/o9mBiqw6ElF3b81.png" alt="01.png"><br><img src="https://i.loli.net/2020/02/10/RK6YpAUMm5XtTbn.png" alt="02.png"><br><img src="https://i.loli.net/2020/02/10/DPbZmHJYWUvT9fn.png" alt="03.png"><br><img src="https://i.loli.net/2020/02/10/cVIMzFqChb9SkoZ.png" alt="04.png"></li></ol><ol start="2"><li><p>利用GNS3配置如图所示网络<br><img src="https://i.loli.net/2020/02/10/F51tw4KbjaiXe8P.png" alt="01.png"></p></li><li><p>配置两台主机的ip地址和路由，一个为192.168.1.1，另一个为192.168.1.2.默认的路由为192.168.1.0<br><img src="https://i.loli.net/2020/02/10/K45RJ9dq3bizWCk.png" alt="02.png"><br><img src="https://i.loli.net/2020/02/10/EJKW9D8gPFOQdHZ.png" alt="03.png"></p></li><li><p>测试连通性<br><img src="https://i.loli.net/2020/02/10/3ifuPty94hvkweM.png" alt="04.png"><br><img src="https://i.loli.net/2020/02/10/MxYHlJRseKuWLVm.png" alt="05.png"></p></li><li><p>在SEED Ubuntu target上启动telnet服务<br><img src="https://i.loli.net/2020/02/10/Bl7wKHhRAsLgEcz.png" alt="06.png"></p></li><li><p>在SEED Ubuntu主机上输入攻击命令<br><img src="https://i.loli.net/2020/02/10/9R5nGNSlUiQd6Tu.png" alt="07.png"></p></li><li><p>在seed Ubuntu target上用wireshark观察攻击报文<br><img src="https://i.loli.net/2020/02/10/chOIQatpP7qYSg3.png" alt="08.png"></p></li><li><p>用netstat –n –tcp命令观察建立的连接，显示的状态为established<br><img src="https://i.loli.net/2020/02/10/qfnNbBGc1kPp7TZ.png" alt="09.png"></p></li><li><p>此时seed ubuntu可以通过telnet登录seed Ubuntu target<br><img src="https://i.loli.net/2020/02/10/cLSAQYJipUw8szO.png" alt="10.png"></p></li><li><p>进一步观察linux内核tcp syn cookie机制<br>通过echo 0 &gt; /proc/sys/net/ipv4/tcp_syncookies命令关闭syn cookies<br>通过sysctl -w net.ipv4.tcp_max_syn_backlog = 5指定所能接受SYN同步包的最大客户端数量为5<br><img src="https://i.loli.net/2020/02/10/R3IEKrmyftcobM9.png" alt="11.png"></p></li><li><p>再次从SEED Ubuntu 上用netwox的syn flood攻击SEED Ubuntu target<br><img src="https://i.loli.net/2020/02/10/embRT7JGZnAvrSO.png" alt="12.png"></p></li><li><p>此时发现不能用telnet登录seed ubuntu target<br><img src="https://i.loli.net/2020/02/10/6JCzFa8oDY5OgGZ.png" alt="13.png"></p></li><li><p>再次打开SEED Ubuntu target内核tcp syn cookie参数(将tcp_syncookies设置为1)，同时从SEED Ubuntu 上用telnet连接主机 SEED Ubuntu target<br><img src="https://i.loli.net/2020/02/10/1EuwVbAZGXHiYSj.png" alt="14.png"></p></li></ol><p>发现可以通过telnet建立连接<br><img src="https://i.loli.net/2020/02/10/ZmfCsdTySpWU298.png" alt="15.png"></p><ol start="14"><li>用netstat –n –tcp查看tcp网络的连接情况。<br><img src="https://i.loli.net/2020/02/10/VNpCqYZdyztFT7o.png" alt="16.png"></li></ol><p>　　在seed ubuntu target查看连接情况<br><img src="https://i.loli.net/2020/02/10/BUdzThlMxGbpZQD.png" alt="17.png"></p><h2 id="四-实验结果分析"><a href="#四-实验结果分析" class="headerlink" title="四.实验结果分析"></a>四.实验结果分析</h2><h3 id="1-SYN-Flood攻击原理"><a href="#1-SYN-Flood攻击原理" class="headerlink" title="1. SYN Flood攻击原理"></a>1. SYN Flood攻击原理</h3><p>　　SYN Flood 攻击是一种典型的拒绝服务型(Denial of Service,DoS)攻击。所谓拒绝服务型攻击就是通过对网络带宽进行消耗性攻击，使受害主机或网络不能够良好的提供服务，从而间接达到攻击的目的。SYN Flood攻击就是利用了“三次握手”的漏洞。假设一个用户向服务器发送了SYN报文后突然死机或掉线，那么服务器在发出 SYN+ACK 应答报文后是无法收到客户端的 ACK 报文的(第三次握手无法完成)，一般把服务器收到 SYN 包而还未收到 ACK 包时的连接状态成为半开连接。这时服务器端一般会重试(再次发送 SYN+ACK 给客户端)并等待一段时间后丢弃这个未完成的连接，这段时间的长度我们称为 SYN Timeout，一般来说这个时间是分钟的数量级(大约为30秒-2分钟)。如果有一个恶意的攻击者大量模拟这种情况，服务器端将为了维护一个非常大的半连接列表而消耗非常多的资源—-数以万计的半连接，即使是简单的保存并遍历也会消耗非常多的 CPU 时间和内存，何况还要不断对这个列表中的 IP 进行 SYN+ACK 的重试。服务器端将忙于处理攻击者伪造的 TCP 连接请求而无暇理睬客户的正常请求，此时从正常客户的角度看来，服务器失去响应，这种情况就称作服务器端受到了SYN Flood攻击(SYN 洪范攻击)。</p><h3 id="2-SYN-Cookies原理"><a href="#2-SYN-Cookies原理" class="headerlink" title="2. SYN Cookies原理"></a>2. SYN Cookies原理</h3><p>　　SYN cookie就是用一个cookie来响应 TCP SYN请求的TCP实现，根据上面的描述，在正常的TCP实现中，当服务器接收到一个SYN数据包，它返回一个SYN+ACK包来应答，然后进入TCP_SYN_RECV(半开放连接)状态来等待最后返回的ACK包。服务器用一个数据空间来描述所有未决的连接，然而这个数据空间的大小是有限的，所以攻击者将塞满这个空间。SYN Cookie是对TCP服务器端的三次握手协议作一些修改，专门用来防范SYN Flood 攻击的一种手段。它的原理是，在TCP服务器收到 TCP SYN包并返回 TCP SYN+ACK 包时，不分配一个专门的数据区，而是根据这个SYN包计算出一个cookie值,并将这个cookie作为将要返回的 SYN+ACK 包的初始序列号。在收到 TCP ACK包时，TCP服务器再根据报头信息获取cookie值，并通过这个cookie值检查这个TCP ACK包的合法性。如果合法，再分配专门的数据区进行处理未来的TCP连接。 由此可见，cookie的实现要求cookie 必须与每次TCP连接紧密对应，攻击者无法伪造cookie，同时cookie中包含连接的状态信息。</p><h3 id="3-实验结果"><a href="#3-实验结果" class="headerlink" title="3. 实验结果"></a>3. 实验结果</h3><p>　　当打开SEED Ubuntu target内核的tcp syn cookie参数时，在target机器遭受syn flood 攻击后，源主机(SEED Ubuntu)可以用telnet登录target主机，即可以建立正常的TCP连接。<br>当内核关闭tcp syn cookie参数时，target主机在遭受flood攻击后，源主机(SEED Ubuntu)telnet不能正常登录target主机，无法建立正常的TCP连接。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实验 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
